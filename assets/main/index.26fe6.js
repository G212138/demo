window.__require=function t(e,n,o){function a(i,s){if(!n[i]){if(!e[i]){var c=i.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!s&&p)return p(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){return a(e[i][1][t]||t)},l,l.exports,t,e,n,o)}return n[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<o.length;i++)a(o[i]);return a}({AdaptiveScreen:[function(t,e,n){"use strict";cc._RF.push(e,"ba00bud/zlDiY6tClWPdHIa","AdaptiveScreen");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgNode=null,e.viewWidth=640,e.viewHeight=1136,e}return a(e,t),e.prototype.onLoad=function(){this.screenAdapter()},e.prototype.start=function(){this.viewUp()},e.prototype.screenAdapter=function(){if(cc.Canvas.instance){this.stage=cc.Canvas.instance.node;var t=cc.Canvas.instance,e=cc.view.getFrameSize();e.width/e.height<t.designResolution.width/t.designResolution.height?(t.fitWidth=!0,t.fitHeight=!1):(t.fitHeight=!0,t.fitWidth=!1)}},e.prototype.viewUp=function(){var t=cc.winSize,e=t.width/this.viewWidth,n=t.height/this.viewHeight;this.bgNode.scale=1*Math.max(e,n)},r([c({type:cc.Node,tooltip:"\u5168\u5c4f\u80cc\u666f\u56fe\u7247\uff0c\u7528\u4e8e\u81ea\u9002\u5e94"})],e.prototype,"bgNode",void 0),r([c],e.prototype,"viewWidth",void 0),r([c],e.prototype,"viewHeight",void 0),r([s],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],AffirmTips:[function(t,e,n){"use strict";cc._RF.push(e,"67e25WAGoRADq1zkpxqqwdF","AffirmTips");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.AffirmTips=void 0;var i=t("../../Data/FrameMsgType"),s=t("../../SDK/T2M"),c=t("../../Utils/UIHelp"),p=t("../BaseFrameUI"),l=cc._decorator,u=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeDes=null,e.title=null,e.des=null,e.close=null,e.ok=null,e.btnCloseLabel=null,e.btnOkLabel=null,e.win=null,e.fail=null,e.callback=null,e}return a(e,t),e.prototype.start=function(){s.T2M.addSyncEventListener(i.FrameMsgType.AFFIRMTIPS_SURE,this.disposeOk.bind(this)),s.T2M.addSyncEventListener(i.FrameMsgType.AFFIRMTIPS_CANCEL,this.disposeCancel.bind(this))},e.prototype.init=function(t,e,n,o,a){this.title.node.active=!1,this.des.node.active=!0,this.win.active=1==t,this.fail.active=2==t,this.type=t,this.callback=n,this.des.string=e,o&&(this.btnCloseLabel.string=o),a&&(this.btnOkLabel.string=a)},e.prototype.setOnlyOneBtnType=function(t){this.close.node.active=!1,this.ok.node.active=!0,this.ok.node.position=cc.v3(0,this.ok.node.position.y,0),t&&(this.btnOkLabel.string=t,t.length>4&&(this.btnOkLabel.fontSize=40))},e.prototype.OnClickClose=function(){},e.prototype.TipsAnimatorScale=function(t){t.stopAllActions();var e=cc.sequence(cc.delayTime(1),cc.scaleTo(.2,1,1));t.runAction(e)},e.prototype.OnClickOk=function(){console.log("\u786e\u8ba4"),s.T2M.dispatch(i.FrameMsgType.AFFIRMTIPS_SURE,null)},e.prototype.OnClickCancel=function(){console.log("\u53d6\u6d88"),s.T2M.dispatch(i.FrameMsgType.AFFIRMTIPS_CANCEL,null)},e.prototype.disposeOk=function(){c.UIHelp.closeAffirmTip(),this.callback&&this.callback(1)},e.prototype.disposeCancel=function(){c.UIHelp.closeAffirmTip(),this.callback&&this.callback(0)},e.className="AffirmTips",r([h(cc.Node)],e.prototype,"NodeDes",void 0),r([h(cc.Label)],e.prototype,"title",void 0),r([h(cc.Label)],e.prototype,"des",void 0),r([h(cc.Button)],e.prototype,"close",void 0),r([h(cc.Button)],e.prototype,"ok",void 0),r([h(cc.Label)],e.prototype,"btnCloseLabel",void 0),r([h(cc.Label)],e.prototype,"btnOkLabel",void 0),r([h(cc.Node)],e.prototype,"win",void 0),r([h(cc.Node)],e.prototype,"fail",void 0),r([u],e)}(p.default);n.AffirmTips=d,cc._RF.pop()},{"../../Data/FrameMsgType":"FrameMsgType","../../SDK/T2M":"T2M","../../Utils/UIHelp":"UIHelp","../BaseFrameUI":"BaseFrameUI"}],AudioPlayExtension:[function(t,e,n){"use strict";cc._RF.push(e,"f5171dGpWFGFZGEuFaQdUkt","AudioPlayExtension"),Object.defineProperty(n,"__esModule",{value:!0}),n.AudioPlayExtension=void 0;var o=t("./../Manager/SoundManager"),a={"\u4f8b":"sfx_buttn","\u5b50":"sfx_error"},r=function(){function t(){}return t.playJoinAudio=function(t,e){if(0==t.length)return console.warn("playJoinAudio : \u5185\u5bb9\u4e3a\u7a7a!"),void e();var n=0;(function r(){if(n>t.length-1)return console.log("'"+t+"' \u64ad\u653e\u5b8c\u6210."),void e();o.SoundManager.playEffect(a[t[n]],!1,!1,!1,r),n++})()},t}();n.AudioPlayExtension=r,cc._RF.pop()},{"./../Manager/SoundManager":"SoundManager"}],BaseFrameUI:[function(t,e,n){"use strict";cc._RF.push(e,"c6fa1aRp8dNq6gX3GwD9kTX","BaseFrameUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Data/FrameConstValue"),s=t("./BaseUI"),c=cc._decorator,p=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.getUrl=function(){return cc.log(this.className),i.FrameConstValue.FRAME_PREFAB_PANEL_DIR+this.className},e.isFramePanel=!0,r([p],e)}(s.BaseUI));n.default=l,cc._RF.pop()},{"../Data/FrameConstValue":"FrameConstValue","./BaseUI":"BaseUI"}],BaseGamePanel:[function(t,e,n){"use strict";cc._RF.push(e,"f1694s8BidGvaCpzhIeiAbf","BaseGamePanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../game/scripts/Data/ConstValue"),s=t("../../../../game/scripts/Manager/EditorManager"),c=t("../../Data/FrameMsgType"),p=t("../../Http/NetWork"),l=t("../../Manager/ListenerManager"),u=t("../../Manager/ReportManager"),h=t("../../Manager/SoundManager"),d=t("../../Manager/SyncDataManager"),f=t("../../Manager/UIManager"),_=t("../../SDK/GameMsg"),g=t("../../SDK/T2M"),y=t("../../Utils/UIHelp"),v=t("../BaseUI"),M=cc._decorator,m=M.ccclass,S=(M.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isPanelReady=!1,e}return a(e,t),e.prototype.start=function(){this.data&&this.data.node&&this.data.node.parent&&this.data.node.removeFromParent(),_.default.gameStart(),this.addSDKEventListener(),p.NetWork.isSync&&!p.NetWork.isMaster&&y.UIHelp.showRecoverMask(),l.ListenerManager.dispatch(c.FrameMsgType.TEACHER_PANEL_LOADING,!1),i.ConstValue.IS_TEACHER?(this.panelReady(),y.UIHelp.showUploadAndReturnPanel()):this.getNet()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),y.UIHelp.closeMask()},e.prototype.panelReady=function(){this._isPanelReady=!0,f.UIManager.isGameShowing?this.setPanel():cc.game.pause()},e.prototype.setPanel=function(){g.T2M.init(),d.SyncDataManager.initSyncData(),u.ReportManager.initReportData(s.EditorManager.getLevelCount()),p.NetWork.isSync&&!p.NetWork.isMaster||y.UIHelp.closeRecoverMask(),s.EditorManager.editorData.isStarCount?cc.resources.load("prefab/ui/panel/OverTips"):cc.resources.load("prefab/ui/panel/StarCount")},e.prototype.onRecoveryData=function(t){d.SyncDataManager.setSyncData(t),d.SyncDataManager.syncData.frameSyncData.isGameOver?this.showGameOverPanel():(y.UIHelp.closeOverTips(),y.UIHelp.closeStarCount())},e.prototype.answerRight=function(t){u.ReportManager.reportLevelResult(!0,t)},e.prototype.answerWrong=function(t){void 0===t&&(t=!1),u.ReportManager.reportLevelResult(!1,t)},e.prototype.gameOver=function(){d.SyncDataManager.syncData.frameSyncData.isGameOver=!0,this.showGameOverPanel()},e.prototype.showGameOverPanel=function(){y.UIHelp.showMask(),h.SoundManager.stopAll();var t=s.EditorManager.editorData.isReplay&&d.SyncDataManager.syncData.frameSyncData.hasReplayCount<s.EditorManager.editorData.replayCount;if(s.EditorManager.editorData.isStarCount)y.UIHelp.showStarCount(t);else{var e=1===s.EditorManager.getLevelCount()?"\u6311\u6218\u6210\u529f":"\u95ef\u5173\u6210\u529f";y.UIHelp.showOverTips(2,"",null,e,t)}},e.prototype.onGameShow=function(){this._isPanelReady&&(cc.game.resume(),this.setPanel())},e.prototype.onReplay=function(){y.UIHelp.closeOverTips(),y.UIHelp.closeStarCount(),d.SyncDataManager.replay(),u.ReportManager.replayGame()},e.prototype.addSDKEventListener=function(){_.default.addEvent(c.FrameMsgType.STOP,this.onSDKMsgStopReceived.bind(this)),l.ListenerManager.on(c.FrameMsgType.ON_RECOVERY_DATA,this.onRecoveryData,this),g.T2M.addSyncEventListener(c.FrameMsgType.REPLAY_START,this.onReplay.bind(this)),l.ListenerManager.on(c.FrameMsgType.PRELOAD_GAME_SHOW,this.onGameShow.bind(this),this)},e.prototype.getNet=function(){var t=this;p.NetWork.httpRequest(p.NetWork.GET_QUESTION+"?courseware_id="+p.NetWork.coursewareId,"GET","application/json;charset=utf-8",function(e,n){if(!e){var o=n;if(Array.isArray(o.data))return;var a=JSON.parse(o.data.courseware_content);if(null!=a){if(a.CoursewareKey!=i.ConstValue.CoursewareKey)return _.default.differntKey("CoursewareKey\u9519\u8bef\uff01"),void y.UIHelp.showErrorPanel("CoursewareKey\u9519\u8bef,\u8bf7\u8054\u7cfb\u5ba2\u670d\uff01","","","\u786e\u5b9a");s.EditorManager.setData(a.data),t.panelReady()}}},null)},e.prototype.onSDKMsgStopReceived=function(){_.default.gameStop(),u.ReportManager.reportGameOver(),_.default.finished()},e.prototype.update=function(){g.T2M.update()},e.className="BaseGamePanel",r([m],e)}(v.BaseUI));n.default=S,cc._RF.pop()},{"../../../../game/scripts/Data/ConstValue":"ConstValue","../../../../game/scripts/Manager/EditorManager":"EditorManager","../../Data/FrameMsgType":"FrameMsgType","../../Http/NetWork":"NetWork","../../Manager/ListenerManager":"ListenerManager","../../Manager/ReportManager":"ReportManager","../../Manager/SoundManager":"SoundManager","../../Manager/SyncDataManager":"SyncDataManager","../../Manager/UIManager":"UIManager","../../SDK/GameMsg":"GameMsg","../../SDK/T2M":"T2M","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI"}],BaseTeacherPanel:[function(t,e,n){"use strict";cc._RF.push(e,"87818Dli8JHk4taZSHeRBG9","BaseTeacherPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../game/scripts/Data/ConstValue"),s=t("../../../../game/scripts/Manager/EditorManager"),c=t("../../Http/NetWork"),p=t("../../Utils/UIHelp"),l=t("../BaseUI"),u=cc._decorator,h=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.data.node.parent.removeChild(this.data.node),this.getNet(),p.UIHelp.closeRecoverMask()},e.prototype.setPanel=function(){},e.prototype.getNet=function(){var t=this;c.NetWork.httpRequest(c.NetWork.GET_TITLE+"?title_id="+c.NetWork.titleId,"GET","application/json;charset=utf-8",function(e,n){if(console.log("\u6d88\u606f\u8fd4\u56de"+n),!e){var o=n;if(Array.isArray(o.data))return void t.setPanel();var a=JSON.parse(o.data.courseware_content);if(c.NetWork.coursewareId=o.data.courseware_id,c.NetWork.empty)t.ClearNet();else if(null!=a){if(a.CoursewareKey!=i.ConstValue.CoursewareKey)return void p.UIHelp.showErrorPanel("\u8be5titleId\u5df2\u88ab\u4f7f\u7528,\u8bf7\u8054\u7cfb\u6280\u672f\u8001\u5e08\u89e3\u51b3\uff01\ntitleId="+c.NetWork.titleId,"","","\u786e\u5b9a");s.EditorManager.setData(a.data),t.setPanel()}else t.setPanel()}},null)},e.prototype.ClearNet=function(){var t={courseware_id:c.NetWork.coursewareId};c.NetWork.httpRequest(c.NetWork.CLEAR,"POST","application/json;charset=utf-8",function(t){t||p.UIHelp.showTip("\u7b54\u6848\u5220\u9664\u6210\u529f")},JSON.stringify(t))},e.className="BaseTeacherPanel",r([h],e)}(l.BaseUI));n.default=d,cc._RF.pop()},{"../../../../game/scripts/Data/ConstValue":"ConstValue","../../../../game/scripts/Manager/EditorManager":"EditorManager","../../Http/NetWork":"NetWork","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI"}],BaseUI:[function(t,e,n){"use strict";cc._RF.push(e,"c6da4j3MGhPfIxwls9tY6iS","BaseUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseUI=void 0;var i=t("../Data/FrameConstValue"),s=t("../Manager/ListenerManager"),c=t("./BindNode"),p=cc._decorator,l=p.ccclass,u=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.mData},set:function(t){this.mData=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this.mTag},set:function(t){this.mTag=t},enumerable:!1,configurable:!0}),e.getUrl=function(){return cc.log(this.className),i.FrameConstValue.PREFAB_PANEL_DIR+this.className},e.prototype.onDestroy=function(){s.ListenerManager.removeAll(this)},e.prototype.onShow=function(){cc.log("BaseUI onShow")},e.className="BaseUI",e.isFramePanel=!1,r([l],e)}(c.default));n.BaseUI=u,cc._RF.pop()},{"../Data/FrameConstValue":"FrameConstValue","../Manager/ListenerManager":"ListenerManager","./BindNode":"BindNode"}],BindNode:[function(t,e,n){"use strict";cc._RF.push(e,"65374G80ONGaJ+/vbcxCejv","BindNode");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator.ccclass,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return a(e,t),n=e,e.prototype.__preload=function(){this.bindNode(this.node,this)},e.prototype.bindNode=function(t,e){if(t&&e)for(var o=[t],a=0;t;){var r=t.name;"_"!==r[0]||e[r]||(e[r]=t);var i=t.getComponent(n);0!==a&&i||(o=o.concat(t.children)),t=o[++a]}},n=r([i],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],BoundingBoxDemo:[function(t,e,n){"use strict";cc._RF.push(e,"d5f9dT/06tF45iF1u1hFPMw","BoundingBoxDemo");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./BoundingBoxHelp"),s=cc._decorator,c=s.ccclass,p=s.property;(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bbh=null,e.grs=null,e}a(e,t),e.prototype.update=function(){this.grs.clear();var t=this.bbh.getBoundingBoxWorldPositions("boundingBox");this.polygon(this.grs,t),this.grs.stroke()},e.prototype.polygon=function(t,e){if(!(e.length<3)){t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.lineTo(e[0].x,e[0].y)}},r([p(i.default)],e.prototype,"bbh",void 0),r([p(cc.Graphics)],e.prototype,"grs",void 0),e=r([c],e)})(cc.Component),cc._RF.pop()},{"./BoundingBoxHelp":"BoundingBoxHelp"}],BoundingBoxHelp:[function(t,e,n){"use strict";cc._RF.push(e,"d28fa0BmSFGwY3HLHVIrT8f","BoundingBoxHelp");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skeleton=null,e.vertices=[],e.positions=[],e}return a(e,t),e.prototype.getSkeleton=function(){return null==this.skeleton&&(this.skeleton=this.node.getComponent(sp.Skeleton)),this.skeleton},e.prototype.getBoundingBoxWorldPositions=function(t){var e=this.getSkeleton();if(null==e)return console.warn("\u6ca1\u6709Spine\u8d44\u6e90\uff01"),this.positions;var n=e.findSlot(t);if(!n)return console.warn("\u6ca1\u6709\u627e\u5230\u63d2\u69fd\uff1a "+t),this.positions;var o=n.attachment;o.computeWorldVertices(n,0,o.worldVerticesLength,this.vertices,0,2);for(var a=0;a<this.vertices.length;a+=2)this.positions[a/2]||(this.positions[a/2]=cc.Vec2.ZERO),this.positions[a/2].x=this.vertices[a],this.positions[a/2].y=this.vertices[a+1];for(a=0;a<this.positions.length;a++)this.positions[a]=this.node.convertToWorldSpaceAR(this.positions[a]);return this.positions},e.prototype.getBoundingBoxRelativePositions=function(t,e){for(var n=this.getBoundingBoxWorldPositions(t),o=0;o<n.length;o++)n[o]=e.convertToNodeSpaceAR(n[o]);return n},r([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],ButtonSync:[function(t,e,n){"use strict";cc._RF.push(e,"2f150r3uJdDXYDw/eUhynln","ButtonSync");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../frame/scripts/SDK/T2M"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchStartEvents=[],e.touchEndEvents=[],e}var n;return a(e,t),n=e,e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.tagId=this.node.name+this.node.parent.name+this.node.getSiblingIndex(),this.addEventByT2M()},e.prototype.addTouchEvent=function(t,e,o){this.touchStartEvents.push(new n.EventHandler),this.touchStartEvents[0].target=t,this.touchStartEvents[0].component=e,this.touchStartEvents[0].handler=o[0],this.touchEndEvents.push(new n.EventHandler),this.touchEndEvents[0].target=t,this.touchEndEvents[0].component=e,this.touchEndEvents[0].handler=o[1]},e.prototype.touchStart=function(t){var e="touchStart"+this.tagId,n=t.getLocation();i.T2M.dispatch(e,{x:n.x,y:n.y})},e.prototype.touchEnd=function(t){var e="touchEnd"+this.tagId,n=t.getLocation();i.T2M.dispatch(e,{x:n.x,y:n.y})},e.prototype.addEventByT2M=function(){i.T2M.addSyncEventListener("touchStart"+this.tagId,this.touchStartHandler.bind(this)),i.T2M.addSyncEventListener("touchEnd"+this.tagId,this.touchEndHandler.bind(this))},e.prototype.touchStartHandler=function(t){for(var e=0,n=this.touchStartEvents;e<n.length;e++)n[e].emit([{target:this.node,pos:cc.v2(t.x,t.y)}])},e.prototype.touchEndHandler=function(t){for(var e=0,n=this.touchEndEvents;e<n.length;e++)n[e].emit([{target:this.node,pos:cc.v2(t.x,t.y)}])},r([p({type:[cc.Component.EventHandler]})],e.prototype,"touchStartEvents",void 0),r([p({type:[cc.Component.EventHandler]})],e.prototype,"touchEndEvents",void 0),n=r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../frame/scripts/SDK/T2M":"T2M"}],ConstValue:[function(t,e,n){"use strict";cc._RF.push(e,"b2ee0BC2l1Pp47nuM279OIO","ConstValue"),Object.defineProperty(n,"__esModule",{value:!0}),n.ConstValue=void 0;var o=function(){function t(){}return t.IS_EDITIONS=!0,t.IS_TEACHER=!0,t.CoursewareKey="23_zcd6_01_Z8WF0nPCmiGRPe",t.GameName="\u6570\u4e00\u6570\u6709\u51e0\u4e2a\u7acb\u4f53\u56fe\u5f62",t.Subject=1,t.Editor_CanShowStars=!1,t.Editor_CanShowGuide=!0,t.Editor_CanShowAutoPlayTitle=!1,t}();n.ConstValue=o,cc._RF.pop()},{}],CustomSyncData:[function(t,e,n){"use strict";cc._RF.push(e,"f6665ym0IlJNYKq4da/THmw","CustomSyncData"),Object.defineProperty(n,"__esModule",{value:!0}),n.CustomSyncData=void 0;n.CustomSyncData=function(){this.curLevel=0,this.stage=[0,0],this.answer=[0,0,0,0,0,0]},cc._RF.pop()},{}],DragGroupSync:[function(t,e,n){"use strict";cc._RF.push(e,"785e4D6t3NM1rjAxHZUfJAb","DragGroupSync");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../frame/scripts/SDK/T2M"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootNode=null,e.touchStartEvents=[],e.touchMovingEvents=[],e.touchEndEvents=[],e.nodes=[],e}return a(e,t),e.prototype.start=function(){var t=this;this.node.children.forEach(function(e,n){t.nodes.push(e),e.zIndex=n,e.attr({id:n,initParent:t.node,initPos:{x:e.x,y:e.y},initSiblingIndex:n}),e.on(cc.Node.EventType.TOUCH_START,t.touchStart,t),e.on(cc.Node.EventType.TOUCH_MOVE,t.touchMove,t),e.on(cc.Node.EventType.TOUCH_END,t.touchEnd,t),e.on(cc.Node.EventType.TOUCH_CANCEL,t.touchEnd,t)}),this.tagId=this.node.name+this.node.parent.name+this.node.getSiblingIndex(),this.addEventByT2M()},e.prototype.touchStart=function(t){var e=t.target,n=this.rootNode.convertToNodeSpaceAR(t.getLocation()),o="touchStart"+this.tagId+e.id,a={id:e.id,pos:{x:n.x,y:n.y}};i.T2M.dispatch(o,a)},e.prototype.touchMove=function(t){var e=t.target,n=this.rootNode.convertToNodeSpaceAR(t.getLocation()),o="touchMove"+this.tagId+e.id,a={id:e.id,pos:{x:n.x,y:n.y}};i.T2M.dispatch(o,a)},e.prototype.touchEnd=function(t){var e=t.target,n=this.rootNode.convertToNodeSpaceAR(t.getLocation()),o="touchEnd"+this.tagId+e.id,a={id:e.id,pos:{x:n.x,y:n.y}};i.T2M.dispatch(o,a)},e.prototype.addEventByT2M=function(){var t=this;this.node.children.forEach(function(e){i.T2M.addSyncEventListener("touchStart"+t.tagId+e.id,t.touchStartHandler.bind(t)),i.T2M.addSyncEventListener("touchMove"+t.tagId+e.id,t.touchMoveHandler.bind(t)),i.T2M.addSyncEventListener("touchEnd"+t.tagId+e.id,t.touchEndHandler.bind(t))})},e.prototype.touchStartHandler=function(t){var e=this.nodes.find(function(e){return e.id==t.id});e.parent=this.rootNode,e.setSiblingIndex(this.rootNode.childrenCount),e.position=cc.v3(t.pos.x,t.pos.y);for(var n=0,o=this.touchStartEvents;n<o.length;n++)o[n].emit([{pos:t.pos,target:e}])},e.prototype.touchMoveHandler=function(t){var e=this.nodes.find(function(e){return e.id==t.id});e.position=cc.v3(t.pos.x,t.pos.y);for(var n=0,o=this.touchMovingEvents;n<o.length;n++)o[n].emit([{pos:t.pos,target:e}])},e.prototype.touchEndHandler=function(t){var e=this.nodes.find(function(e){return e.id==t.id});e.position=cc.v3(t.pos.x,t.pos.y);for(var n=0,o=this.touchEndEvents;n<o.length;n++)o[n].emit([{pos:t.pos,target:e}])},r([p(cc.Node)],e.prototype,"rootNode",void 0),r([p({type:[cc.Component.EventHandler]})],e.prototype,"touchStartEvents",void 0),r([p({type:[cc.Component.EventHandler]})],e.prototype,"touchMovingEvents",void 0),r([p({type:[cc.Component.EventHandler]})],e.prototype,"touchEndEvents",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../frame/scripts/SDK/T2M":"T2M"}],DragSync:[function(t,e,n){"use strict";cc._RF.push(e,"e9c61afhzFG+qPfmNCaDKxC","DragSync");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../frame/scripts/SDK/T2M"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootNode=null,e.touchStartEvents=[],e.touchMovingEvents=[],e.touchEndEvents=[],e}var n;return a(e,t),n=e,e.prototype.onLoad=function(){this.rootNode=cc.find("Canvas/GamePanel");var t=this.node.getSiblingIndex();this.node.attr({id:t,initParent:this.node.parent,initPos:{x:this.node.x,y:this.node.y},initSiblingIndex:t}),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.tagId=this.node.name+this.node.parent.name+this.node.getSiblingIndex(),this.addEventByT2M()},e.prototype.addTouchEvent=function(t,e,o){this.touchStartEvents.push(new n.EventHandler),this.touchStartEvents[0].target=t,this.touchStartEvents[0].component=e,this.touchStartEvents[0].handler=o[0],this.touchMovingEvents.push(new n.EventHandler),this.touchMovingEvents[0].target=t,this.touchMovingEvents[0].component=e,this.touchMovingEvents[0].handler=o[1],this.touchEndEvents.push(new n.EventHandler),this.touchEndEvents[0].target=t,this.touchEndEvents[0].component=e,this.touchEndEvents[0].handler=o[2]},e.prototype.touchStart=function(t){var e=this.rootNode.convertToNodeSpaceAR(t.getLocation()),n="touchStart"+this.tagId,o={pos:{x:e.x,y:e.y}};i.T2M.dispatch(n,o)},e.prototype.touchMove=function(t){var e=this.rootNode.convertToNodeSpaceAR(t.getLocation()),n="touchMove"+this.tagId,o={pos:{x:e.x,y:e.y}};i.T2M.dispatch(n,o,!0)},e.prototype.touchEnd=function(t){var e=this.rootNode.convertToNodeSpaceAR(t.getLocation()),n="touchEnd"+this.tagId,o={pos:{x:e.x,y:e.y}};i.T2M.dispatch(n,o)},e.prototype.addEventByT2M=function(){i.T2M.addSyncEventListener("touchStart"+this.tagId,this.touchStartHandler.bind(this)),i.T2M.addSyncEventListener("touchMove"+this.tagId,this.touchMoveHandler.bind(this)),i.T2M.addSyncEventListener("touchEnd"+this.tagId,this.touchEndHandler.bind(this)),console.log("addEventByT2M",this.tagId)},e.prototype.touchStartHandler=function(t){this.node.parent=this.rootNode,this.node.position=cc.v3(t.pos.x,t.pos.y);for(var e=0,n=this.touchStartEvents;e<n.length;e++)n[e].emit([{pos:t.pos,target:this.node}])},e.prototype.touchMoveHandler=function(t){this.node.position=cc.v3(t.pos.x,t.pos.y);for(var e=0,n=this.touchMovingEvents;e<n.length;e++)n[e].emit([{pos:t.pos,target:this.node}])},e.prototype.touchEndHandler=function(t){this.node.position=cc.v3(t.pos.x,t.pos.y);for(var e=0,n=this.touchEndEvents;e<n.length;e++)n[e].emit([{pos:t.pos,target:this.node}])},r([p(cc.Node)],e.prototype,"rootNode",void 0),r([p({type:[cc.Component.EventHandler]})],e.prototype,"touchStartEvents",void 0),r([p({type:[cc.Component.EventHandler]})],e.prototype,"touchMovingEvents",void 0),r([p({type:[cc.Component.EventHandler]})],e.prototype,"touchEndEvents",void 0),n=r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../frame/scripts/SDK/T2M":"T2M"}],EditorManager:[function(t,e,n){"use strict";cc._RF.push(e,"64363RgvXdCJJdpexRQv89P","EditorManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.EditorManager=void 0;var o=function(){this.isStarCount=!1,this.isReplay=!0,this.isPlayTitle=!1,this.isPlayGuide=!0,this.replayCount=1,this.levelCount=1,this.stepCount=0,this.coursewareLevel=0},a=function(){function t(){this.editorData=new o}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.isSupportEdit=function(){return Object.getOwnPropertyNames(this.editorData).length>8},t.prototype.getLevelCount=function(){return this.editorData.levelCount},t.prototype.setLevelCount=function(t){this.editorData.levelCount=t},t.prototype.getStepCount=function(){return this.editorData.stepCount||this.getLevelCount()},t.prototype.setStepCount=function(t){this.editorData.stepCount=t},t.prototype.getCoursewareLevel=function(){return this.editorData.coursewareLevel},t.prototype.getData=function(){return this.editorData},t.prototype.setData=function(t){this.editorData=t},t}();n.EditorManager=a.getInstance(),cc._RF.pop()},{}],ErrorPanel:[function(t,e,n){"use strict";cc._RF.push(e,"78373xfPadEJ5IFn4sizh3z","ErrorPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Utils/UIHelp"),s=t("./../../Manager/SoundManager"),c=t("./../../SDK/GameMsg"),p=t("./../BaseFrameUI"),l=cc._decorator,u=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.biaoTi=null,e.shuoMing=null,e.tiShi=null,e.btnLab=null,e.btn=null,e.isClose=!1,e}return a(e,t),e.prototype.start=function(){},e.prototype.onLoad=function(){},e.prototype.setPanel=function(t,e,n,o,a,r){void 0===r&&(r=!1);var i={shuoMing:t,biaoTi:e,tiShi:n};c.default.warn("ErrorPanelLog",i),s.SoundManager.playEffect("sfx_error",!1),this.shuoMing.string=t,this.isClose=r,this.callback=a,this.biaoTi.string=e||this.biaoTi.string,this.tiShi.string=n||this.tiShi.string,this.btnLab.string=o||this.btnLab.string,this.btn.interactable=this.isClose},e.prototype.onBtnClick=function(){s.SoundManager.playEffect("sfx_buttn",!1),this.callback&&this.callback(),this.isClose&&i.UIHelp.closeErrorPanel()},e.className="ErrorPanel",r([h(cc.Label)],e.prototype,"biaoTi",void 0),r([h(cc.Label)],e.prototype,"shuoMing",void 0),r([h(cc.Label)],e.prototype,"tiShi",void 0),r([h(cc.Label)],e.prototype,"btnLab",void 0),r([h(cc.Button)],e.prototype,"btn",void 0),r([u],e)}(p.default);n.default=d,cc._RF.pop()},{"../../Utils/UIHelp":"UIHelp","./../../Manager/SoundManager":"SoundManager","./../../SDK/GameMsg":"GameMsg","./../BaseFrameUI":"BaseFrameUI"}],EventType:[function(t,e,n){"use strict";cc._RF.push(e,"9d48b48sqpEdozOnbOcVCAB","EventType"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventType=void 0,function(t){t.ON_BUTTON_CLICKED="ON_BUTTON_CLICKED",t.GAME_RECONNECT="GAME_RECONNECT",t.GAME_OVER="GAME_OVER",t.REPORT_RIGHT="REPORT_RIGHT",t.REPORT_WRONG="REPORT_WRONG"}(n.EventType||(n.EventType={})),cc._RF.pop()},{}],Fangkuai:[function(t,e,n){"use strict";cc._RF.push(e,"06bd7TNx9VAar60gpNjTJwj","Fangkuai");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../frame/scripts/Manager/SoundManager"),s=t("../../../../frame/scripts/Manager/SyncDataManager"),c=t("../../../../frame/scripts/SDK/T2M"),p=t("../../../../frame/scripts/Utils/Tools"),l=t("../layer/GameLayer"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.idx=0,e.answer=0,e.needHide=!1,e.GameLayer=null,e._curIdx=0,e._maxIdx=9,e._numberSound=["V_ZCD6_0111","V_ZCD6_0112","V_ZCD6_0113","V_ZCD6_0114","V_ZCD6_0115","V_ZCD6_0116","V_ZCD6_0117","V_ZCD6_0118","V_ZCD6_0119"],e}return a(e,t),e.prototype.onLoad=function(){this._touchArea=this.node.getChildByName("collisionPoint")},e.prototype.onClickFangkuai=function(t){this.checkBtnPolygonCollider(this._touchArea,t.pos)&&this.handleClick()},e.prototype.checkBtnPolygonCollider=function(t,e){var n=t.getComponent(cc.PolygonCollider).points,o=t.convertToNodeSpaceAR(cc.v2(e.x,e.y));return cc.Intersection.pointInPolygon(o,n)},e.prototype.handleClick=function(){var t="touchEnd"+this.tagId;c.T2M.dispatch(t,null),this._curIdx<this._maxIdx?(this._curIdx++,this.playNumberAni(),s.SyncDataManager.getSyncData().customSyncData.answer[this.idx]=this._curIdx):(i.SoundManager.stopAllEffect(),i.SoundManager.playEffect("F_ZCD6_0103",!1,!1,!1,function(){i.SoundManager.playEffect("V_ZCD6_0120",!1,!1,!1)}))},e.prototype.playNumberAni=function(){var t=this.node.getComponent(sp.Skeleton),e=this.getClipBaseName()+"true"+this._curIdx;p.Tools.playSpine(t,e,!1),i.SoundManager.stopAllEffect(),i.SoundManager.playEffect(this._numberSound[this._curIdx-1],!1,!1,!1)},e.prototype.syncNumberAni=function(t){this._curIdx=t;var e=this.node.getComponent(sp.Skeleton),n=this.getClipBaseName()+"true"+this._curIdx;p.Tools.playSpine(e,n,!1),i.SoundManager.stopAllEffect()},e.prototype.playWrongAni=function(){var t=this.node.getComponent(sp.Skeleton),e=this.getClipBaseName()+(0==this._curIdx?"false2":"false");1==this.answer&&(e=this.getClipBaseName()+(0==this._curIdx?"false":"false2")),p.Tools.playSpine(t,e,!1),i.SoundManager.stopAllEffect(),i.SoundManager.playEffect("F_ZCD6_0110",!1,!1,!1),this._curIdx=0,s.SyncDataManager.getSyncData().customSyncData.answer[this.idx]=this._curIdx},e.prototype.palyJumpAni=function(t){var e=this;if(this.answer==t){this.node.active=!this.needHide;var n=this.node.getComponent(sp.Skeleton),o=this.getClipBaseName()+"jump2";p.Tools.playSpine(n,o,!1,function(){e.GameLayer.getComponent(l.default).playFangkuaiJump(t+1)}),i.SoundManager.playEffect(this.getEffectName(),!1,!1,!1)}},e.prototype.getClipBaseName=function(){var t="";switch(this.answer){case 1:t="A_ZCD6_0105_";break;case 2:t="A_ZCD6_0106_";break;case 3:t="A_ZCD6_0107_"}return t},e.prototype.getEffectName=function(){var t="";switch(this.answer){case 1:t="F_ZCD6_0107";break;case 2:t="F_ZCD6_0108";break;case 3:t="F_ZCD6_0109"}return t},e.prototype.isRight=function(){return this._curIdx==this.answer},e.prototype.resetFangkuai=function(){this.node.active=!0,this._curIdx=0;var t=this.node.getComponent(sp.Skeleton);p.Tools.playSpine(t,this.getClipBaseName()+"idle",!1)},e.prototype.setCurIdx=function(t){this._curIdx=t},r([d(cc.Integer)],e.prototype,"idx",void 0),r([d(cc.Integer)],e.prototype,"answer",void 0),r([d(cc.Boolean)],e.prototype,"needHide",void 0),r([d(cc.Node)],e.prototype,"GameLayer",void 0),r([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../../frame/scripts/Manager/SoundManager":"SoundManager","../../../../frame/scripts/Manager/SyncDataManager":"SyncDataManager","../../../../frame/scripts/SDK/T2M":"T2M","../../../../frame/scripts/Utils/Tools":"Tools","../layer/GameLayer":"GameLayer"}],FrameConstValue:[function(t,e,n){"use strict";cc._RF.push(e,"431c7WvXqpPsYjqV8+W1/t4","FrameConstValue"),Object.defineProperty(n,"__esModule",{value:!0}),n.FrameConstValue=void 0;var o=function(){function t(){}return t.FRAME_PREFAB_PANEL_DIR="prefab/panel/",t.FRAME_AUDIO_DIR="audios/",t.CONFIG_FILE_DIR="config/",t.PREFAB_PANEL_DIR="prefab/ui/panel/",t.GAME_AUDIO_DIR="audios/",t}();n.FrameConstValue=o,cc._RF.pop()},{}],FrameMsgType:[function(t,e,n){"use strict";cc._RF.push(e,"132eegjAf1ENIev+X8ptATq","FrameMsgType"),Object.defineProperty(n,"__esModule",{value:!0}),n.FrameMsgType=void 0;var o=function(){function t(){}return t.ON_EDIT_STATE_SWITCHING="ON_EDIT_STATE_SWITCHING",t.ON_TOUCH_CLICK="ON_TOUCH_CLICK",t.ON_TOUCH_START="ON_TOUCH_START",t.ON_TOUCH_MOVE="ON_TOUCH_MOVE",t.ON_TOUCH_END="ON_TOUCH_END",t.ON_HEART_BREAK="ON_HEART_BREAK",t.ON_RECOVERY_DATA="ON_RECOVERY_DATA",t.REPLAY_START="REPLAY_START",t.COMPLETE_TRUMPET="COMPLETE_TRUMPET",t.ON_MASK="ON_MASK",t.MASK_RECOVER="MASK_RECOVER",t.OVERTIPS_CLOSE="OVERTIPS_CLOSE",t.AFFIRMTIPS_SURE="AFFIRMTIPS_SURE",t.AFFIRMTIPS_CANCEL="AFFIRMTIPS_CANCEL",t.ON_FIRST_BREAK="ON_FIRST_BREAK",t.TEACHER_PANEL_LOADING="TEACHER_PANEL_LOADING",t.PRELOAD_GAME_SHOW="PRELOAD_GAME_SHOW",t.ACTION_SYNC_RECEIVE="action_sync_receive",t.DISABLED="disabled",t.RELOAD="reload",t.DATA_RECOVERY="data_recovery",t.STOP="stop",t.INIT="init",t.THRESHHOLD="threshhold",t.PLAYBGM="play_bgm",t.RESUMEBGM="resume_bgm",t.STOPBGM="stop_bgm",t.PLAYAUDIOTITLE="play_audio_title",t.STOPAUDIOTITLE="stop_audio_title",t.STOPALLAUDIO="stop_all_audio",t.STOPALLEFFECT="stop_all_effect",t.STOPALL="stop_all",t}();n.FrameMsgType=o,cc._RF.pop()},{}],FrameSyncData:[function(t,e,n){"use strict";cc._RF.push(e,"98b4e33oG1P47hj2twQ6/jN","FrameSyncData"),Object.defineProperty(n,"__esModule",{value:!0}),n.FrameSyncData=void 0;n.FrameSyncData=function(){this.actionId=0,this.isDispose=!0,this.hasReplayCount=0,this.isGameOver=!1},cc._RF.pop()},{}],GameLayer:[function(t,e,n){"use strict";cc._RF.push(e,"501afqz/XtMQJe+r8tEHnyL","GameLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../frame/scripts/Manager/ListenerManager"),s=t("../../../../frame/scripts/Manager/SoundManager"),c=t("../../../../frame/scripts/Manager/SyncDataManager"),p=t("../../../../frame/scripts/Utils/UIHelp"),l=t("../../Data/EventType"),u=t("../../Manager/EditorManager"),h=t("../Item/Fangkuai"),d=t("./GuideLayer"),f=cc._decorator,_=f.ccclass,g=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fangkuai=[],e.endNode=null,e.endLayer=null,e.guideLayer=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(){p.UIHelp.closeMask(),this.resetAllFangkuai(),this.endNode.active=!1,u.EditorManager.editorData.isPlayGuide?(this.guideLayer.active=!0,this.guideLayer.getComponent(d.default).init()):this.startGame()},e.prototype.startGame=function(){this.endNode.active=!1,c.SyncDataManager.getSyncData().customSyncData.stage=[3,0],this.resetAllFangkuai()},e.prototype.handleReconnect=function(){this.resetAllFangkuai(),s.SoundManager.stopAllEffect,this.unscheduleAllCallbacks();var t=c.SyncDataManager.getSyncData().customSyncData.stage;4==t[0]?(this.endLayer.active=!0,this.node.active=!1):3==t[0]&&0==t[1]?this.sycnAnswer():3==t[0]&&1==t[1]&&(this.sycnAnswer(),this.onClickSubmit())},e.prototype.sycnAnswer=function(){s.SoundManager.stopAllEffect(),cc.Tween.stopAll(),this.guideLayer.active=!1;for(var t=c.SyncDataManager.getSyncData().customSyncData.answer,e=0;e<this.fangkuai.length;e++)t[e]>0&&this.fangkuai[e].getComponent(h.default).syncNumberAni(t[e])},e.prototype.onClickSubmit=function(){var t=this;c.SyncDataManager.getSyncData().customSyncData.stage=[3,1];for(var e=!0,n=0;n<this.fangkuai.length;n++)this.fangkuai[n].getComponent(h.default).isRight()||(e=!1,this.fangkuai[n].getComponent(h.default).playWrongAni());e?(p.UIHelp.showMask(),i.ListenerManager.dispatch(l.EventType.REPORT_RIGHT),s.SoundManager.playEffect("V_ZCD6_0122",!1,!1,!1,function(){s.SoundManager.playEffect("V_ZCD6_0123",!1,!1,!1),t.playFangkuaiJump(1)})):(i.ListenerManager.dispatch(l.EventType.REPORT_WRONG),s.SoundManager.playEffect("V_ZCD6_0121",!1,!1,!1),this.scheduleOnce(function(){t.resetAllFangkuai()},1))},e.prototype.onClickReset=function(){this.resetAllFangkuai()},e.prototype.resetAllFangkuai=function(){this.fangkuai.forEach(function(t){t.getComponent(h.default).resetFangkuai()})},e.prototype.playFangkuaiJump=function(t){var e=this;t<=3?this.fangkuai.forEach(function(e){e.getComponent(h.default).palyJumpAni(t)}):(c.SyncDataManager.getSyncData().customSyncData.stage=[4,0],this.endNode.active=!0,s.SoundManager.playEffect("V_ZCD6_0124",!1,!1,!1,function(){c.SyncDataManager.getSyncData().customSyncData.stage=[4,1],e.endLayer.active=!0,i.ListenerManager.dispatch(l.EventType.GAME_OVER),p.UIHelp.closeMask(),e.node.active=!1}))},r([g(cc.Node)],e.prototype,"fangkuai",void 0),r([g(cc.Node)],e.prototype,"endNode",void 0),r([g(cc.Node)],e.prototype,"endLayer",void 0),r([g(cc.Node)],e.prototype,"guideLayer",void 0),r([_],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../../../../frame/scripts/Manager/ListenerManager":"ListenerManager","../../../../frame/scripts/Manager/SoundManager":"SoundManager","../../../../frame/scripts/Manager/SyncDataManager":"SyncDataManager","../../../../frame/scripts/Utils/UIHelp":"UIHelp","../../Data/EventType":"EventType","../../Manager/EditorManager":"EditorManager","../Item/Fangkuai":"Fangkuai","./GuideLayer":"GuideLayer"}],GameMain:[function(t,e,n){"use strict";cc._RF.push(e,"df13ad6CdtFhp9uucAXsIC/","GameMain");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMain=void 0;var i=t("../../../game/scripts/Manager/EditorManager"),s=t("../Data/FrameMsgType"),c=t("../Http/NetWork"),p=t("../Manager/ListenerManager"),l=t("../Manager/ReportManager"),u=t("../Manager/SoundManager"),h=t("../Manager/SyncDataManager"),d=t("../Manager/UIManager"),f=t("../SDK/GameMsg"),_=t("../SDK/T2M"),g=t("../Utils/UIHelp"),y=cc._decorator,v=y.ccclass;y.property,cc.macro.ENABLE_WEBGL_ANTIALIAS=!0;var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){var t=document.getElementById("loading-full");t&&(t.style.display="none"),cc.macro.ENABLE_MULTI_TOUCH=!1,this.addSDKEventListener(),f.default.get_is_preload(c.NetWork.setIsPreload),f.default.get_is_sync(c.NetWork.setIsSync),f.default.get_role(c.NetWork.setIsTeacher),f.default.get_is_supportKeepAndRestart(c.NetWork.setIsSupportKeepPlay)},e.prototype.addSDKEventListener=function(){f.default.recv_show_gamePanel(this.onReceiveGameShow.bind(this)),f.default.recv_hide_gamePanel(this.onReceiveGameHide.bind(this)),f.default.recv_keep_playing(this.onReceiveKeepPlaying.bind(this)),f.default.recv_cancel_keep_playing(this.onReceiveCancellKeepPlaying.bind(this)),f.default.recv_restart(this.onReceiveRestart.bind(this)),f.default.recv_is_master(this.onReceiveIsMaster.bind(this)),f.default.request_event_ready()},e.prototype.onReceiveKeepPlaying=function(){if(console.log("onReceiveKeepPlaying"),d.UIManager.isGameShowing){var t=new _.Action;t.type=s.FrameMsgType.ON_HEART_BREAK;var e=new _.SendData(!0,[t]);f.default.request_keep_playing(e)}},e.prototype.onReceiveCancellKeepPlaying=function(){console.log("onReceiveCancellKeepPlaying"),d.UIManager.isGameShowing&&_.T2M.setFastHeartBreakState()},e.prototype.onReceiveRestart=function(){console.log("onReceiveRestart"),d.UIManager.isGameShowing&&(f.default.request_restart_over(),d.UIManager.closeAllUI(),u.SoundManager.stopAll(),h.SyncDataManager.initSyncData(),l.ReportManager.initReportData(i.EditorManager.getLevelCount()),this.scheduleOnce(function(){g.UIHelp.showGamePanel()}))},e.prototype.onReceiveGameShow=function(){console.log("onReceiveGameShow"),d.UIManager.isGameShowing||(d.UIManager.isGameShowing=!0,p.ListenerManager.dispatch(s.FrameMsgType.PRELOAD_GAME_SHOW))},e.prototype.onReceiveGameHide=function(){console.log("onReceiveGameHide"),d.UIManager.isGameShowing&&(d.UIManager.isGameShowing=!1,d.UIManager.closeAllUI(),u.SoundManager.stopAll(),h.SyncDataManager.initSyncData(),l.ReportManager.initReportData(i.EditorManager.getLevelCount()),_.T2M.isRecover=!1,this.scheduleOnce(function(){g.UIHelp.showGamePanel()}))},e.prototype.onReceiveIsMaster=function(t){c.NetWork.isMaster=t.data,c.NetWork.isMaster?g.UIHelp.closeRecoverMask():(_.T2M.isRecover=!1,g.UIHelp.showRecoverMask(),0!==h.SyncDataManager.syncData.frameSyncData.actionId&&(h.SyncDataManager.syncData.frameSyncData.actionId=-999)),console.log("onReceiveIsMaster isMaster: "+c.NetWork.isMaster)},r([v],e)}(cc.Component);n.GameMain=M,cc._RF.pop()},{"../../../game/scripts/Manager/EditorManager":"EditorManager","../Data/FrameMsgType":"FrameMsgType","../Http/NetWork":"NetWork","../Manager/ListenerManager":"ListenerManager","../Manager/ReportManager":"ReportManager","../Manager/SoundManager":"SoundManager","../Manager/SyncDataManager":"SyncDataManager","../Manager/UIManager":"UIManager","../SDK/GameMsg":"GameMsg","../SDK/T2M":"T2M","../Utils/UIHelp":"UIHelp"}],GameManager:[function(t,e,n){"use strict";cc._RF.push(e,"51cedVLm+hIt4MvfmM8Nj59","GameManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameManager=void 0;var o=function(){function t(){}return t.getInstance=function(){return null===this._instance&&(this._instance=new t),this._instance},t._instance=null,t}();n.GameManager=o.getInstance(),cc._RF.pop()},{}],GameMsg:[function(t,e,n){"use strict";cc._RF.push(e,"835ffTMXMRIv6YdlX4iSt2f","GameMsg");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),a=0;for(e=0;e<n;e++)for(var r=arguments[e],i=0,s=r.length;i<s;i++,a++)o[a]=r[i];return o};Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(){}return t.addEvent=function(t,e){window.gameMsg.on_client_event(t,e)},t.resLoadStart=function(){window.gameMsg.res_load_start("courseware_game","1.1.8"),t.resLoadStartLog(),t.request_res_load_start("")},t.resLoading=function(e){window.gameMsg.res_load_process(e),t.res_load_process(e)},t.resLoadEnd=function(){window.gameMsg.res_load_complete(),t.resLoadEndLog(),t.request_res_load_end("")},t.gameStart=function(){window.gameMsg.game_start(),t.gameMsg_gameStart(),t.iframe_game_start()},t.answerSyncSend=function(e){window.gameMsg.answer_sync_send(e),window.iframeMsg.answer_sync_send(e),t.gameLevelReport(e)},t.gameOver=function(e){window.gameMsg.game_over(e),window.iframeMsg.game_over(e),t.gameOverReport(e)},t.gameStatisticData=function(t){var e={type:"courseware_game_answer",data:t};window.gameMsg.game_statistic_data(e),window.iframeMsg.game_statistic_data(e)},t.finished=function(){window.gameMsg.finished()},t.send_sync_data=function(t){window.iframeMsg.send_sync_data(t)},t.recv_sync_data=function(t){window.iframeMsg.recv_sync_data(t)},t.get_is_sync=function(t){window.iframeMsg.get_is_sync(t)},t.get_role=function(t){window.iframeMsg.get_role(t)},t.recv_json_data=function(t){window.iframeMsg.recv_json_data(t)},t.request_json_data=function(t){window.iframeMsg.request_json_data(t)},t.info=function(t){for(var e,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];(e=window.aliLogMsg).info.apply(e,o([t],n))},t.warn=function(t){for(var e,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];(e=window.aliLogMsg).warn.apply(e,o([t],n))},t.error=function(t){for(var e,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];(e=window.aliLogMsg).error.apply(e,o([t],n))},t.URLError=function(t){window.aliLogMsg.URLError(t)},t.httpTimeOut=function(t){window.aliLogMsg.httpTimeOut(t)},t.httpError=function(t){window.aliLogMsg.httpError(t)},t.differntKey=function(t){window.aliLogMsg.differntKey(t)},t.gameStop=function(){window.aliLogMsg.gameStop()},t.send_sync_3s_data=function(t){window.iframeMsg.send_sync_3s_data(t)},t.recv_sync_3s_data=function(t){window.iframeMsg.recv_sync_3s_data(t)},t.recv_keep_playing=function(t){window.iframeMsg.recv_keep_playing(t)},t.request_keep_playing=function(t){window.iframeMsg.request_keep_playing(t)},t.recv_cancel_keep_playing=function(t){window.iframeMsg.recv_cancel_keep_playing(t)},t.recv_restart=function(t){window.iframeMsg.recv_restart(t)},t.request_restart_over=function(t){void 0===t&&(t=""),window.iframeMsg.request_restart_over(t)},t.request_event_ready=function(t){void 0===t&&(t=""),window.iframeMsg.request_event_ready(t)},t.recv_is_master=function(t){window.iframeMsg.recv_is_master(t)},t.request_sync_init=function(t){void 0===t&&(t=""),window.iframeMsg.request_sync_init(t)},t.request_level_info=function(t){window.iframeMsg.request_level_info(t)},t.get_is_supportKeepAndRestart=function(t){window.iframeMsg.get_is_supportKeepAndRestart(t)},t.get_is_preload=function(t){window.iframeMsg.get_is_preload(t)},t.recv_show_gamePanel=function(t){window.iframeMsg.recv_show_gamePanel(t)},t.recv_hide_gamePanel=function(t){window.iframeMsg.recv_hide_gamePanel(t)},t.request_res_load_start=function(t){window.iframeMsg.request_res_load_start(t)},t.res_load_process=function(t){window.iframeMsg.res_load_process(t)},t.request_res_load_end=function(t){window.iframeMsg.request_res_load_end(t)},t.request_engine_load_start=function(t){window.iframeMsg.request_engine_load_start(t)},t.request_engine_load_end=function(t){window.iframeMsg.request_engine_load_end(t)},t.iframe_game_start=function(){this.b_init||(this.b_init=!0,window.iframeMsg.game_start({}),t.iframeMsg_gameStart())},t.resLoadStartLog=function(){window.aliLogMsg.resLoadStart()},t.resLoadEndLog=function(){window.aliLogMsg.resLoadEnd()},t.gameMsg_gameStart=function(){window.aliLogMsg.gameMsg_gameStart()},t.iframeMsg_gameStart=function(){window.aliLogMsg.iframeMsg_gameStart()},t.gameLevelReport=function(t){window.aliLogMsg.gameLevelReport(t)},t.gameOverReport=function(t){window.aliLogMsg.gameOverReport(t)},t.b_init=!1,t}();n.default=a,cc._RF.pop()},{}],GamePanel:[function(t,e,n){"use strict";cc._RF.push(e,"246c2OOkGlKHoa6ZJOVEHI+","GamePanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../frame/scripts/Manager/ListenerManager"),s=t("../../../../frame/scripts/Manager/SyncDataManager"),c=t("../../../../frame/scripts/UI/Panel/BaseGamePanel"),p=t("../../Data/EventType"),l=cc._decorator,u=l.ccclass,h=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){t.prototype.start.call(this),i.ListenerManager.on(p.EventType.GAME_OVER,this.gameOver,this),i.ListenerManager.on(p.EventType.REPORT_RIGHT,this.answerRight,this),i.ListenerManager.on(p.EventType.REPORT_WRONG,this.answerWrong,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),i.ListenerManager.off(p.EventType.GAME_OVER,this.gameOver,this),i.ListenerManager.off(p.EventType.REPORT_RIGHT,this.answerRight,this),i.ListenerManager.off(p.EventType.REPORT_WRONG,this.answerWrong,this)},e.prototype.setPanel=function(){t.prototype.setPanel.call(this)},e.prototype.onRecoveryData=function(e){t.prototype.onRecoveryData.call(this,e),i.ListenerManager.dispatch(p.EventType.GAME_RECONNECT)},e.prototype.answerRight=function(e){t.prototype.answerRight.call(this,e)},e.prototype.answerWrong=function(e){void 0===e&&(e=!1),t.prototype.answerWrong.call(this,e)},e.prototype.gameOver=function(){t.prototype.gameOver.call(this)},e.prototype.onReplay=function(){t.prototype.onReplay.call(this),s.SyncDataManager.getSyncData().customSyncData.stage=[0,0],i.ListenerManager.dispatch(p.EventType.GAME_RECONNECT)},e.prototype.update=function(e){t.prototype.update.call(this,e)},e.className="GamePanel",r([u],e)}(c.default));n.default=h,cc._RF.pop()},{"../../../../frame/scripts/Manager/ListenerManager":"ListenerManager","../../../../frame/scripts/Manager/SyncDataManager":"SyncDataManager","../../../../frame/scripts/UI/Panel/BaseGamePanel":"BaseGamePanel","../../Data/EventType":"EventType"}],GameUIManager:[function(t,e,n){"use strict";cc._RF.push(e,"e8863QVVt9AUKdp8dkL2LSd","GameUIManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../frame/scripts/Manager/ListenerManager"),s=t("../../../../frame/scripts/Manager/SyncDataManager"),c=t("../../Data/EventType"),p=t("./GameLayer"),l=t("./GuideLayer"),u=t("./StartLayer"),h=cc._decorator,d=h.ccclass,f=h.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameLayer=null,e.guideLayer=null,e.startLayer=null,e.endLayer=null,e}return a(e,t),e.prototype.onLoad=function(){i.ListenerManager.on(c.EventType.GAME_RECONNECT,this.reconnect,this)},e.prototype.onDestroy=function(){i.ListenerManager.off(c.EventType.GAME_RECONNECT,this.reconnect,this)},e.prototype.reconnect=function(){switch(s.SyncDataManager.getSyncData().customSyncData.stage[0]){case 0:case 1:this.gameLayer.active=!1,this.guideLayer.active=!1,this.startLayer.active=!0,this.endLayer.active=!1,this.startLayer.getComponent(u.default).handleReconnect();break;case 2:this.gameLayer.active=!0,this.guideLayer.active=!0,this.startLayer.active=!1,this.endLayer.active=!1,this.guideLayer.getComponent(l.default).handleReconnect();break;case 3:case 4:this.gameLayer.active=!0,this.guideLayer.active=!1,this.startLayer.active=!1,this.endLayer.active=!1,this.gameLayer.getComponent(p.default).handleReconnect()}},r([f(cc.Node)],e.prototype,"gameLayer",void 0),r([f(cc.Node)],e.prototype,"guideLayer",void 0),r([f(cc.Node)],e.prototype,"startLayer",void 0),r([f(cc.Node)],e.prototype,"endLayer",void 0),r([d],e)}(cc.Component);n.default=_,cc._RF.pop()},{"../../../../frame/scripts/Manager/ListenerManager":"ListenerManager","../../../../frame/scripts/Manager/SyncDataManager":"SyncDataManager","../../Data/EventType":"EventType","./GameLayer":"GameLayer","./GuideLayer":"GuideLayer","./StartLayer":"StartLayer"}],GuideLayer:[function(t,e,n){"use strict";cc._RF.push(e,"a5b7agWSr1MD5RP8EnhEqMo","GuideLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../frame/scripts/Manager/SoundManager"),s=t("../../../../frame/scripts/Manager/SyncDataManager"),c=t("../../../../frame/scripts/Utils/Tools"),p=t("../../../../frame/scripts/Utils/UIHelp"),l=t("./GameLayer"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.n_finger=null,e.n_submitBtn=null,e.n_resetBtn=null,e.ske_fangkuai_1=null,e.ske_fangkuai_2=null,e.n_GameLayer=null,e}return a(e,t),e.prototype.init=function(){p.UIHelp.closeMask(),s.SyncDataManager.getSyncData().customSyncData.stage=[2,0],this.n_finger.active=!1,this.step_1()},e.prototype.handleReconnect=function(){switch(s.SyncDataManager.getSyncData().customSyncData.stage[1]){case 0:this.init();case 1:c.Tools.playSpine(this.ske_fangkuai_1,"A_ZCD6_0105_true1",!1),this.step_2();break;case 2:c.Tools.playSpine(this.ske_fangkuai_1,"A_ZCD6_0105_true1",!1),c.Tools.playSpine(this.ske_fangkuai_2,"A_ZCD6_0106_true2",!1),this.step_3();break;case 3:this.step_4();break;case 4:this.guideEnd()}},e.prototype.step_1=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[2,1],this.n_finger.x=-706.441,this.n_finger.y=-234.571,this.n_finger.active=!0,cc.tween(this.n_finger).to(.3,{scale:1.05}).to(.3,{scale:1}).call(function(){c.Tools.playSpine(t.ske_fangkuai_1,"A_ZCD6_0105_true1",!1)}).start(),i.SoundManager.playEffect("V_ZCD6_0106",!1,!1,!1,function(){t.step_2()})},e.prototype.step_2=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[2,2],this.n_finger.x=-600.066,this.n_finger.y=3,this.n_finger.active=!0,cc.tween(this.n_finger).to(.3,{scale:1.05}).to(.3,{scale:1}).call(function(){c.Tools.playSpine(t.ske_fangkuai_2,"A_ZCD6_0106_true1",!1),cc.tween(t.n_finger).to(.3,{scale:1.05}).to(.3,{scale:1}).call(function(){c.Tools.playSpine(t.ske_fangkuai_2,"A_ZCD6_0106_true2",!1)}).start()}).start(),i.SoundManager.playEffect("V_ZCD6_0107",!1,!1,!1,function(){t.step_3()})},e.prototype.step_3=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[2,3],this.n_finger.position=this.n_submitBtn.position,this.n_finger.active=!0,cc.tween(this.n_finger).to(.3,{scale:1.05}).to(.3,{scale:1}).start(),i.SoundManager.playEffect("V_ZCD6_0108",!1,!1,!1,function(){t.step_4()})},e.prototype.step_4=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[2,4],this.n_finger.position=this.n_resetBtn.position,this.n_finger.active=!0,cc.tween(this.n_finger).to(.3,{scale:1.05}).to(.3,{scale:1}).start(),i.SoundManager.playEffect("V_ZCD6_0109",!1,!1,!1,function(){i.SoundManager.playEffect("V_ZCD6_0110",!1,!1,!1,function(){t.guideEnd()})})},e.prototype.guideEnd=function(){i.SoundManager.stopAllEffect(),cc.Tween.stopAll(),this.n_GameLayer.getComponent(l.default).startGame(),this.node.active=!1},e.prototype.onClickScreen=function(){this.guideEnd()},r([d(cc.Node)],e.prototype,"n_finger",void 0),r([d(cc.Node)],e.prototype,"n_submitBtn",void 0),r([d(cc.Node)],e.prototype,"n_resetBtn",void 0),r([d(sp.Skeleton)],e.prototype,"ske_fangkuai_1",void 0),r([d(sp.Skeleton)],e.prototype,"ske_fangkuai_2",void 0),r([d(cc.Node)],e.prototype,"n_GameLayer",void 0),r([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../../frame/scripts/Manager/SoundManager":"SoundManager","../../../../frame/scripts/Manager/SyncDataManager":"SyncDataManager","../../../../frame/scripts/Utils/Tools":"Tools","../../../../frame/scripts/Utils/UIHelp":"UIHelp","./GameLayer":"GameLayer"}],HitTest:[function(t,e,n){"use strict";cc._RF.push(e,"cc84066lYNFeaHvvm4jg8ve","HitTest"),Object.defineProperty(n,"__esModule",{value:!0}),n.HitTest=void 0;var o=function(){function t(){}return t.posInRect=function(t,e){var n=e.parent.convertToWorldSpaceAR(e.position),o=cc.v2(n.x-e.width/2,n.y-e.height/2),a=cc.v2(n.x+e.width/2,n.y+e.height/2);return t.x>=o.x&&t.y>=o.y&&t.x<=a.x&&t.y<=a.y},t.imgHitTest=function(t,e,n){if(void 0===n&&(n=!1),n){var o=e.spriteFrame,a=e.node.convertToNodeSpaceAR(t);if(0==e.node.anchorX&&1==e.node.anchorY)a.y=-a.y;else if(.5==e.node.anchorX&&.5==e.node.anchorY){var r=e.node.width,i=e.node.height;a.x=r/2+a.x,a.y>0?a.y=i/2-a.y:a.y=i/2+Math.abs(a.y)}var s=o.getTexture(),c=document.createElement("canvas"),p=c.getContext("2d");c.width=s.width,c.height=s.height,p.drawImage(s.getHtmlElementObj(),0,0,s.width,s.height,0,0,s.width/1,s.height/1);var l=(p=c.getContext("2d")).getImageData(a.x,a.y,1,1).data;return console.log(l),0!=l[3]}this.posInRect(t,e.node)},t.polygonInside=function(t,e){for(var n=0,o=0,a=e.length-1;o<a;o++){var r=e[o],i=e[o+1];if(r.y<t.y&&i.y>t.y||r.y>t.y&&i.y<t.y){var s=(t.y-r.y)/(i.y-r.y);t.x<r.x+s*(i.x-r.x)&&++n}}return n%2==1},t}();n.HitTest=o,cc._RF.pop()},{}],ListenerManager:[function(t,e,n){"use strict";cc._RF.push(e,"05dc2tRAiFMobMbxaPK4NIf","ListenerManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ListenerManager=void 0;var o=function(){function t(){this.handle={}}return t.getInstance=function(){return null===this._instance&&(this._instance=new t),this._instance},t.prototype.on=function(t,e,n){if(!this.hasEvent(t,e,n)){this.handle[t]||(this.handle[t]=[]);var o={func:e,target:n};this.handle[t].push(o)}},t.prototype.off=function(t,e,n){var o=this.handle[t];if(o&&!(o.length<=0))for(var a=0;a<o.length;a++){var r=o[a];if(e==r.func&&(!n||n==r.target)){o.splice(a,1);break}}},t.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this.handle[t];if(o&&!(o.length<=0))for(var a=0;a<o.length;a++){var r=o[a];r.func.apply(r.target,e)}},t.prototype.removeAll=function(t){if(t)for(var e in this.handle)for(var n=0,o=(a=this.handle[e]).length;n<o;n++)a[n].target==t&&(a.splice(n,1),o>0&&o--,n--);else for(var e in this.handle)for(var a=this.handle[e];a.length>0;)a.pop()},t.prototype.hasEvent=function(t,e,n){var o=this.handle[t];if(!o||o.length<=0)return!1;for(var a=0;a<o.length;a++){var r=o[a];if(e==r.func&&(!n||n==r.target))return!0}return!1},t._instance=null,t}();n.ListenerManager=o.getInstance(),cc._RF.pop()},{}],LoadingUI:[function(t,e,n){"use strict";cc._RF.push(e,"cf8a66RO2hJWJN7q1dt4/zn","LoadingUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,r){function i(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(s){r=[6,s],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LoadingUI=void 0;var c=t("../../../../game/scripts/Data/ConstValue"),p=t("../../../../game/scripts/UI/panel/GamePanel"),l=t("../../../../game/scripts/UI/panel/TeacherPanel"),u=t("../../Http/NetWork"),h=t("../../Manager/SoundManager"),d=t("../../Manager/UIManager"),f=t("../../SDK/GameMsg"),_=t("../BaseFrameUI"),g=cc._decorator,y=g.ccclass,v=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nd_like=null,e._pb_loading_like=null,e._lb_percent_like=null,e._nd_yuwen=null,e._pb_loading_yuwen=null,e._lb_percent_yuwen=null,e._nd_yingyu=null,e._pb_loading_yingyu=null,e._lb_percent_yingyu=null,e._sp_progressTag_yingyu=null,e.isLoadStart=!1,e._resProgress=20,e._audioProgress=10,e}return a(e,t),e.prototype.onLoad=function(){u.NetWork.GetRequest(),this.initPanelBySubject(),this.init()},e.prototype.init=function(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.loadPreloadDir()];case 1:return t.sent(),this.setLoadingProgressUI(this._resProgress),this.loadAudio(),[2]}})})},e.prototype.initPanelBySubject=function(){var t=c.ConstValue.Subject||1;this._nd_like.active=1===t,this._nd_yuwen.active=2===t,this._nd_yingyu.active=3===t,this._sp_progressTag_yingyu.getComponent(sp.Skeleton).setAnimation(0,"loading",!0)},e.prototype.loadAudio=function(){return i(this,void 0,void 0,function(){var t=this;return s(this,function(){return h.SoundManager.preLoadAllAudioClips(function(){t.setLoadingProgressUI(t._resProgress+t._audioProgress),t.openPanel()}),[2]})})},e.prototype.loadPreloadDir=function(){return i(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(t){cc.resources.loadDir("preload",cc.Asset,function(){t()})})]})})},e.prototype.openPanel=function(){var t=this,e=c.ConstValue.IS_TEACHER?l.default:p.default;d.UIManager.openUI(e,this,0,function(){f.default.resLoadEnd()},function(e,n){t.isLoadStart||(t.isLoadStart=!0,f.default.resLoadStart());var o=t._resProgress+t._audioProgress,a=o+Math.round(e/n*(100-o));t.setLoadingProgressUI(a)})},e.prototype.setLoadingProgressUI=function(t){if(f.default.resLoading(t),this._pb_loading_like.getComponent(cc.ProgressBar).progress=t/100,this._pb_loading_yuwen.getComponent(cc.ProgressBar).progress=t/100,this._pb_loading_yingyu.getComponent(cc.ProgressBar).progress=t/100,this._lb_percent_like.getComponent(cc.Label).string=t.toString()+"%",this._lb_percent_yuwen.getComponent(cc.Label).string=t.toString()+"%",this._lb_percent_yingyu.getComponent(cc.Label).string=t.toString()+"%",3===c.ConstValue.Subject&&t>=80){var e=this._sp_progressTag_yingyu.getComponent(sp.Skeleton);"finish"!==e.animation&&e.setAnimation(0,"finish",!1)}},e.className="LoadingUI",r([y],e)}(_.default));n.LoadingUI=v,cc._RF.pop()},{"../../../../game/scripts/Data/ConstValue":"ConstValue","../../../../game/scripts/UI/panel/GamePanel":"GamePanel","../../../../game/scripts/UI/panel/TeacherPanel":"TeacherPanel","../../Http/NetWork":"NetWork","../../Manager/SoundManager":"SoundManager","../../Manager/UIManager":"UIManager","../../SDK/GameMsg":"GameMsg","../BaseFrameUI":"BaseFrameUI"}],MaskGlobal:[function(t,e,n){"use strict";cc._RF.push(e,"858970ZsXNOcpzdwRAxST5n","MaskGlobal");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Data/FrameMsgType"),s=t("../../Manager/ListenerManager"),c=t("../../Manager/UIManager"),p=t("../BindNode"),l=cc._decorator,u=l.ccclass,h=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nd_mask=null,e._nd_loading=null,e.isShowLoading=!1,e}return a(e,t),e.prototype.onLoad=function(){this.node.zIndex=c.EPANEL_ZORDER.MASK},e.prototype.start=function(){this._nd_mask.on(cc.Node.EventType.TOUCH_START,this.on_touchStart,this),s.ListenerManager.on(i.FrameMsgType.ON_MASK,this.onMask,this),this._nd_loading.active=!1,this._nd_mask.active=!1},e.prototype.onMask=function(t,e){void 0===e&&(e=!1),this._nd_mask.active=t,this.isShowLoading=e,this.SetLoading(this.isShowLoading)},e.prototype.on_touchStart=function(){},e.prototype.SetLoading=function(t){this._nd_loading.active=t},r([u],e)}(p.default));n.default=h,cc._RF.pop()},{"../../Data/FrameMsgType":"FrameMsgType","../../Manager/ListenerManager":"ListenerManager","../../Manager/UIManager":"UIManager","../BindNode":"BindNode"}],MaskRecover:[function(t,e,n){"use strict";cc._RF.push(e,"c61c0OGRkxGBqEB0icrBo6y","MaskRecover");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Data/FrameMsgType"),s=t("../../Manager/ListenerManager"),c=t("../../Manager/UIManager"),p=t("../BindNode"),l=cc._decorator,u=l.ccclass,h=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nd_mask=null,e._nd_loading=null,e.isShowLoading=!1,e}return a(e,t),e.prototype.onLoad=function(){this.node.zIndex=c.EPANEL_ZORDER.MASK},e.prototype.start=function(){s.ListenerManager.on(i.FrameMsgType.MASK_RECOVER,this.onMask,this),this._nd_loading.active=!1,this._nd_mask.active=!1},e.prototype.onMask=function(t){this._nd_mask.active=t},r([u],e)}(p.default));n.default=h,cc._RF.pop()},{"../../Data/FrameMsgType":"FrameMsgType","../../Manager/ListenerManager":"ListenerManager","../../Manager/UIManager":"UIManager","../BindNode":"BindNode"}],MathUtils:[function(t,e,n){"use strict";cc._RF.push(e,"aa960SepSxHGal1p7xVIQi8","MathUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.MathUtils=void 0;var o=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getAngle=function(t){return 180*t/Math.PI},t.prototype.getRadian=function(t){return t/180*Math.PI},t.prototype.getRadian2=function(t,e,n,o){var a=n-t,r=o-e;return Math.atan2(r,a)},t.prototype.getDistance=function(t,e){var n=e.x-t.x,o=e.y-t.y,a=n*n+o*o;return Math.sqrt(a)},t.prototype.limit=function(t,e){t=Math.min(t,e);var n=(e=Math.max(t,e))-t;return t+Math.random()*n},t.prototype.limitInteger=function(t,e){return Math.round(this.limit(t,e))},t.prototype.randomArray=function(t){return t[Math.floor(Math.random()*t.length)]},t.prototype.SagPoint=function(t,e,n,o){var a=(n.x-o.x)*(n.x-o.x)+(n.y-o.y)*(n.y-o.y),r=((t-n.x)*(o.x-n.x)+(e-n.y)*(o.y-n.y))/a,i=n.x+r*(o.x-n.x),s=n.y+r*(o.y-n.y);return new cc.Vec3(i,s)},t.prototype.extendedLinePoint=function(t,e,n){var o,a,r;return o=this.getDistance(t,e),e.x>t.x&&e.y>t.y?(a=n/o*Math.abs(t.x-e.x)+e.x,r=n/o*Math.abs(t.y-e.y)+e.y):e.x<t.x&&e.y>t.y?(a=-n/o*Math.abs(t.x-e.x)+e.x,r=n/o*Math.abs(t.y-e.y)+e.y):e.x<t.x&&e.y<t.y?(a=-n/o*Math.abs(t.x-e.x)+e.x,r=-n/o*Math.abs(t.y-e.y)+e.y):e.x>t.x&&e.y<t.y&&(a=n/o*Math.abs(t.x-e.x)+e.x,r=-n/o*Math.abs(t.y-e.y)+e.y),new cc.Vec3(a,r)},t.prototype.getTwoPointsRadian1=function(t,e){var n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),a=o/Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),r=Math.acos(a),i=Math.floor(180/(Math.PI/r));return e.x>t.x&&e.y<t.y&&(i=180-i),e.x==t.x&&e.y>t.y&&(i=180),e.x>t.x&&e.y==t.y&&(i=90),e.x<t.x&&e.y<t.y&&(i=180+i),e.x<t.x&&e.y==t.y&&(i=270),e.x<t.x&&e.y>t.y&&(i=360-i),i},t.prototype.getTwoPointsRadian2=function(t,e){var n=t.x-e.x,o=t.y-e.y;return-180*Math.atan2(o,n)/Math.PI-90},t.prototype.fingCrossPoint=function(t,e,n,o){var a=e.y-t.y,r=t.x-e.x,i=t.x*e.y-e.x*t.y,s=o.y-n.y,c=n.x-o.x,p=n.x*o.y-o.x*n.y,l=a*c-s*r;if(0==l)return null;var u=(i*c-p*r)/l,h=(a*p-s*i)/l;return new cc.Vec3(Math.floor(u),Math.floor(h))},t.prototype.accAdd=function(t,e){var n,o,a=0,r=0;try{a=t.toString().split(".")[1].length}catch(s){a=0}try{r=e.toString().split(".")[1].length}catch(s){r=0}if(o=Math.abs(a-r),n=Math.pow(10,Math.max(a,r)),o>0){var i=Math.pow(10,o);a>r?(t=Number(t.toString().replace(".","")),e=Number(e.toString().replace(".",""))*i):(t=Number(t.toString().replace(".",""))*i,e=Number(e.toString().replace(".","")))}else t=Number(t.toString().replace(".","")),e=Number(e.toString().replace(".",""));return(t+e)/n},t.prototype.accSub=function(t,e){var n,o=0,a=0;try{o=t.toString().split(".")[1].length}catch(r){o=0}try{a=e.toString().split(".")[1].length}catch(r){a=0}return((t*(n=Math.pow(10,Math.max(o,a)))-e*n)/n).toFixed(o>=a?o:a)},t.prototype.accMul=function(t,e){var n=0,o=t.toString(),a=e.toString();try{n+=o.split(".")[1].length}catch(r){}try{n+=a.split(".")[1].length}catch(r){}return Number(o.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,n)},t.prototype.accDiv=function(t,e){var n=0,o=0;try{n=t.toString().split(".")[1].length}catch(a){}try{o=e.toString().split(".")[1].length}catch(a){}return Number(t.toString().replace(".",""))/Number(e.toString().replace(".",""))*Math.pow(10,o-n)},t.prototype.getCenterPosition=function(t,e){return cc.v3((t.x+e.x)/2,(t.y+e.y)/2)},t}();n.MathUtils=o,cc._RF.pop()},{}],NetWork:[function(t,e,n){"use strict";cc._RF.push(e,"9cd01aQNbFMUY4sUMN0yYH5","NetWork"),Object.defineProperty(n,"__esModule",{value:!0}),n.NetWork=n.NetWorkClass=void 0;var o=t("../../../game/scripts/Data/ConstValue"),a=t("../Manager/UIManager"),r=t("../SDK/GameMsg"),i=t("../Utils/UIHelp"),s=function(){function t(){this.isOnlineEnv="online"==this.GetIsOnline(),this.isOwcr=this.GetBPreload(),this.BASE=this.isOnlineEnv?"https://courseware-online.saasp.vdyoo.com":"https://ceshi-courseware-online.saasp.vdyoo.com",this.GET_QUESTION=this.BASE+"/get",this.GET_USER_PROGRESS=this.BASE+"/get/answer",this.GET_TITLE=this.BASE+"/get/title",this.ADD=this.BASE+"/add",this.MODIFY=this.BASE+"/modify",this.CLEAR=this.BASE+"/clear",this.empty=!1,this.userId=null,this.chapterId=null,this.coursewareId=null,this.titleId=null,this.bLive=null,this.bPreload=null,this.env=null,this.app=null,this.platform=null,this.channel=null,this.browser=null,this.appVersion=null,this.isTeacher=!1,this.isSync=!1,this.isOffline=0,this.isMaster=null,this.isSupportKeepPlay=!1,this.theRequest=null}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setIsSync=function(t){t=null!=t&&t,n.NetWork.isSync=t},t.prototype.setIsTeacher=function(t){var e="teacher"==t;n.NetWork.isTeacher=e},t.prototype.setIsPreload=function(t){t=null!=t&&t,a.UIManager.isGameShowing=!t},t.prototype.setIsMaster=function(t){t=null!=t&&t,n.NetWork.isMaster=t},t.prototype.setIsSupportKeepPlay=function(t){n.NetWork.isSupportKeepPlay=t,t||(n.NetWork.isMaster=n.NetWork.isTeacher),console.log("isSupportKeepPlay: "+t)},t.prototype.httpRequest=function(t,e,n,a,s){var c=this;if(void 0===a&&(a=null),void 0===s&&(s=""),this.isOffline&&t.substring(0,this.GET_QUESTION.length)==this.GET_QUESTION)return r.default.recv_json_data(function(o){console.log("recv_json_data:",o),a&&0==o.jsonData.errcode?a(!1,o.jsonData):i.UIHelp.showErrorPanel(o.jsonData.errmsg+",\u8bf7\u8054\u7cfb\u5ba2\u670d\uff01","","","\u786e\u5b9a",function(){c.httpRequest(t,e,n,a,s)},!1)}),void r.default.request_json_data({coursewareId:this.coursewareId});if(o.ConstValue.IS_TEACHER){if(!this.titleId)return void i.UIHelp.showErrorPanel("URL\u53c2\u6570\u9519\u8bef,\u7f3a\u5c11titleId,\u8bf7\u8054\u7cfb\u6280\u672f\u4eba\u5458\uff01","","","\u786e\u5b9a")}else if(!(o.ConstValue.IS_TEACHER||this.userId&&this.coursewareId&&this.env&&this.app&&this.channel&&this.browser))return r.default.URLError(this.theRequest),void i.UIHelp.showErrorPanel("URL\u53c2\u6570\u9519\u8bef,\u8bf7\u8054\u7cfb\u5ba2\u670d\uff01","","","\u786e\u5b9a");var p=new XMLHttpRequest;p.open(e,t),p.timeout=1e4,p.setRequestHeader("Content-Type",n),p.withCredentials=!0,p.onreadystatechange=function(){if(console.log("httpRequest rsp status",p.status,"        xhr.readyState",p.readyState,"        xhr.responseText",p.responseText),4==p.readyState&&p.status>=200&&p.status<=400){var l=JSON.parse(p.responseText);a&&0==l.errcode?a(!1,l):(r.default.httpError(l.errmsg),o.ConstValue.IS_EDITIONS&&i.UIHelp.showErrorPanel(l.errmsg+",\u8bf7\u8054\u7cfb\u5ba2\u670d\uff01","","","\u786e\u5b9a",function(){c.httpRequest(t,e,n,a,s)},!1))}},p.ontimeout=function(){r.default.httpTimeOut("\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),o.ConstValue.IS_EDITIONS&&i.UIHelp.showErrorPanel("\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","","\u82e5\u91cd\u65b0\u8fde\u63a5\u65e0\u6548\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d","\u91cd\u65b0\u8fde\u63a5",function(){c.httpRequest(t,e,n,a,s)},!0),console.log("httpRequest timeout"),a&&a(!0,null)},p.onerror=function(){o.ConstValue.IS_EDITIONS&&i.UIHelp.showErrorPanel("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","\u82e5\u91cd\u65b0\u8fde\u63a5\u65e0\u6548\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d","","\u91cd\u65b0\u8fde\u63a5",function(){c.httpRequest(t,e,n,a,s)},!0),console.log("httpRequest error"),a&&a(!0,null)},p.send(s)},t.prototype.GetRequest=function(){if(null!=this.theRequest)return this.theRequest;this.theRequest=new Object;var t=location.search;if(-1!=t.indexOf("?"))for(var e=t.substr(1).split("&"),n=0;n<e.length;n++)this.theRequest[e[n].split("=")[0]]=decodeURIComponent(e[n].split("=")[1]);return this.userId=this.theRequest.userId,this.chapterId=this.theRequest.chapterId,this.coursewareId=this.theRequest.coursewareId,this.titleId=this.theRequest.titleId,this.bLive=this.theRequest.bLive,this.bPreload=this.theRequest.bPreload,this.env=this.theRequest.env,this.app=this.theRequest.app,this.platform=this.theRequest.platform,this.channel=this.theRequest.channel,this.browser=this.theRequest.browser,this.appVersion=this.theRequest.appVersion,this.empty=this.theRequest.empty,this.isOffline=parseInt(this.theRequest.isOffline),this.theRequest},t.prototype.GetBPreload=function(){var t=0;return this.GetRequest().bPreload&&(t=this.GetRequest().bPreload),t},t.prototype.GetIsOnline=function(){var t="test";return this.GetRequest().env&&(t=this.GetRequest().env),t},t}();n.NetWorkClass=s,n.NetWork=s.getInstance(),cc._RF.pop()},{"../../../game/scripts/Data/ConstValue":"ConstValue","../Manager/UIManager":"UIManager","../SDK/GameMsg":"GameMsg","../Utils/UIHelp":"UIHelp"}],OverTips:[function(t,e,n){"use strict";cc._RF.push(e,"d402btyepNJObcDSUkLUQcr","OverTips");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.OverTips=n.DefalutTitle=n.Type_Tile=void 0;var i=t("./../../Manager/SoundManager"),s=t("../../Utils/Tools"),c=t("../BaseFrameUI"),p=t("../../Utils/UIHelp"),l=t("../../Manager/UIManager"),u=t("../../SDK/T2M"),h=t("../../Data/FrameMsgType"),d=t("../../../../game/scripts/Data/ConstValue");(function(t){t[t.ZuoDaJieShu=0]="ZuoDaJieShu",t[t.ChuangGuanChengGong=1]="ChuangGuanChengGong",t[t.TiaoZhanJieShu=2]="TiaoZhanJieShu",t[t.TiaoZhanChengGong=3]="TiaoZhanChengGong",t[t.ChuangGuanJieShu=4]="ChuangGuanJieShu"})(n.Type_Tile||(n.Type_Tile={})),n.DefalutTitle=["\u4f5c\u7b54\u7ed3\u675f","\u95ef\u5173\u6210\u529f","\u6311\u6218\u7ed3\u675f","\u6311\u6218\u6210\u529f","\u95ef\u5173\u7ed3\u675f"];var f={"\u4f5c":"img_zuo","\u7b54":"img_da","\u7ed3":"img_jie","\u675f":"img_shu","\u6210":"img_cheng","\u529f":"img_gong","\u6311":"img_tiao","\u6218":"img_zhan","\u95ef":"img_chuang","\u5173":"img_guan"},_=cc._decorator,g=_.ccclass,y=(_.property,function(t){function e(){var e=t.call(this)||this;return e._lb_tips=null,e._sp_false=null,e._sp_true=null,e._sp_complete=null,e._btn_close=null,e._btn_replay=null,e._nd_yanhua=null,e.callback=null,e.endInAnimation=!1,e.img_titles=[],e.bones=[],e._endTitle="",e}return a(e,t),e.prototype.onLoad=function(){l.UIManager.getBundleRes("frameRes","images/OverTips/word",cc.SpriteAtlas,function(){})},e.prototype.start=function(){this._btn_close.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this),u.T2M.addSyncEventListener(h.FrameMsgType.OVERTIPS_CLOSE,this.doClickClose.bind(this))},e.prototype.onDisable=function(){this._btn_close.off(cc.Node.EventType.TOUCH_END,this.onClickClose,this)},e.prototype.init=function(t,e,o,a,r,c,l){var u=this;switch(void 0===e&&(e=""),void 0===c&&(c=!1),void 0===l&&(l=!0),this.callback=o,this._sp_false.active=0==t,this._sp_true.active=1==t,this._sp_complete.active=2==t,this._lb_tips.active=2!=t,this._lb_tips.getComponent(cc.Label).string=e,this._btn_close.active=c&&(0===t||1===t),this._btn_replay&&(this._btn_replay.active=r),a&&4===a.length?this._endTitle=a:this._endTitle=n.DefalutTitle[0],t){case 0:s.Tools.playSpine(this._sp_false.getComponent(sp.Skeleton),"false",!1,function(){l&&u.delayClose()}),i.SoundManager.playEffect("sfx_genneg",!1,!1,!1);break;case 1:this._sp_true.getComponent(sp.Skeleton).clearTracks(),s.Tools.playSpine(this._sp_true.getComponent(sp.Skeleton),"true",!1,function(){l&&u.delayClose()}),i.SoundManager.playEffect("sfx_genpos",!1,!1,!1);break;case 2:this.playCompleteBySubject()}this.playTipsAction(),p.UIHelp.closeMask()},e.prototype.playCompleteBySubject=function(){switch(d.ConstValue.Subject||1){case 1:this._sp_complete.active=!1;var t=this._sp_complete.getComponent(sp.Skeleton);this.bones=[],this.bones.push(t.findBone("paipai")),this.bones.push(t.findBone("xiaoU")),this.bones.push(t.findBone("mimiya")),this.bones.push(t.findBone("doudou")),this.createTitleImage();break;case 2:this.endInAnimation=!1,this._sp_complete.active=!0;var e=this._sp_complete.getComponent(sp.Skeleton);s.Tools.playSpine(e,"ni zhenbang",!1,function(){s.Tools.playSpine(e,"xunhuan",!0)}),i.SoundManager.playEffect("over_yuwen",!1);break;case 3:this.endInAnimation=!1,this._nd_yanhua.active=!0,this._sp_complete.active=!0;var n=this._sp_complete.getComponent(sp.Skeleton);s.Tools.playSpine(n,"animation",!1,function(){n.animation=null}),i.SoundManager.playEffect("over_yingyu",!1)}},e.prototype.delayClose=function(){var t=this;this.scheduleOnce(function(){t.doClickClose()},0)},e.prototype.playTipsAction=function(){if(this._lb_tips.active){var t=cc.v2(this._lb_tips.position.x,this._lb_tips.position.y),e=cc.v2(t.x,t.y-72.8),n=cc.v2(t.x,t.y+12),o=cc.v2(t.x,t.y-8),a=cc.v2(t.x,t.y+7.3);this._lb_tips.position=cc.v3(e.x,e.y),cc.tween(this._lb_tips).to(.08,{x:n.x,y:n.y}).to(.08,{x:o.x,y:o.y}).to(.08,{x:a.x,y:a.y}).to(.06,{x:t.x,y:t.y}).start()}},e.prototype.onClickClose=function(){u.T2M.dispatch(h.FrameMsgType.OVERTIPS_CLOSE,null)},e.prototype.doClickClose=function(){this.callback&&this.callback(),p.UIHelp.closeOverTips()},e.prototype.createTitleImage=function(){var t=this;l.UIManager.getBundleRes("frameRes","images/OverTips/word",cc.SpriteAtlas,function(e){t.img_titles.forEach(function(t){t.removeFromParent(!0)}),t.img_titles=[];for(var n=0;n<t._endTitle.length;++n){var o=t._endTitle[n],a=e.getSpriteFrame(f[o]),r=new cc.Node;r.addComponent(cc.Sprite).spriteFrame=a,r.parent=t.node,r.active=!1,t.img_titles.push(r)}t.endInAnimation=!0,t._sp_complete.active=!0;var c=t._sp_complete.getComponent(sp.Skeleton);s.Tools.playSpine(c,"in",!1,function(){s.Tools.playSpine(c,"stand",!0),t.endInAnimation=!1}),i.SoundManager.playEffect("sfx_geupgrd",!1)})},e.prototype.update=function(){if(this.endInAnimation)for(var t=0;t<this.img_titles.length;t++)this.img_titles[t].active=!0,this.img_titles[t].position=cc.v3(this.bones[t].worldX-139,this.bones[t].worldY-135)},e.className="OverTips",r([g],e)}(c.default));n.OverTips=y,cc._RF.pop()},{"../../../../game/scripts/Data/ConstValue":"ConstValue","../../Data/FrameMsgType":"FrameMsgType","../../Manager/UIManager":"UIManager","../../SDK/T2M":"T2M","../../Utils/Tools":"Tools","../../Utils/UIHelp":"UIHelp","../BaseFrameUI":"BaseFrameUI","./../../Manager/SoundManager":"SoundManager"}],ReportManager:[function(require,module,exports){"use strict";cc._RF.push(module,"c1c64g+oUJINqZmXJU6GCDp","ReportManager");var __extends=this&&this.__extends||(extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),extendStatics;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReportData=exports.ExtraData=exports.ExtraGameOverData=exports.GameOverData=exports.ExtraLevelData=exports.LevelData=exports.AnswerResult=exports.ReportManager=void 0;var ConstValue_1=require("../../../game/scripts/Data/ConstValue"),EditorManager_1=require("../../../game/scripts/Manager/EditorManager"),GameMsg_1=require("../SDK/GameMsg"),ReportManagerClass=function(){function ReportManagerClass(){this._startLevelConfig=[80,50,0],this._type="txt",this._result=[],this._playIndex=0,this._levelStartTime=0,this._coastTimeArr=[],this._tryCounts=[],this._correctCounts=[],this._AnswerResults=[],this._levelCount=0,this._curLevelId=0,this.isAllOver=!1,this._isReportedGameOver=!1,this._stepCount=0}return ReportManagerClass.getInstance=function(){return this._instance||(this._instance=new ReportManagerClass),this._instance},ReportManagerClass.prototype.addCoastTime=function(t){var e=t-this._levelStartTime;e=1e3*Math.ceil(e/1e3),this._coastTimeArr[this._curLevelId]=e},ReportManagerClass.prototype.getCoastTimes=function(){return this._coastTimeArr},ReportManagerClass.prototype.setCoastTimes=function(t){this._coastTimeArr=t},ReportManagerClass.prototype.getTryCounts=function(){return this._tryCounts},ReportManagerClass.prototype.setTryCounts=function(t){this._tryCounts=t},ReportManagerClass.prototype.getCorrectCounts=function(){return this._correctCounts},ReportManagerClass.prototype.setCorrectCounts=function(t){this._correctCounts=t},ReportManagerClass.prototype.getAnswerResults=function(){return this._AnswerResults},ReportManagerClass.prototype.setAnswerResults=function(t){this._AnswerResults=t},ReportManagerClass.prototype.setAnswerResultByLevel=function(t,e){this._AnswerResults[t]=e},ReportManagerClass.prototype.addTryCount=function(t){this._tryCounts[this._curLevelId]?this._tryCounts[this._curLevelId]+=1:this._tryCounts[this._curLevelId]=1,void 0===this._correctCounts[this._curLevelId]&&(this._correctCounts[this._curLevelId]=0),t&&(this._correctCounts[this._curLevelId]+=1)},ReportManagerClass.prototype.initReportData=function(t){this._playIndex=1,this._curLevelId=0,this.isAllOver=!1,this._isReportedGameOver=!1,this._levelCount=t,this._result=[];for(var e=0;e<this._levelCount;e++){var n=this._levelCount>1?ConstValue_1.ConstValue.GameName+"_\u7b2c"+(e+1)+"\u5173":ConstValue_1.ConstValue.GameName,o=new ExtraLevelData;o.id=e+1,o.question_info=n,this._result.push(o)}this._levelStartTime=Date.now(),this.setTryCounts([]),this.setCorrectCounts([]),this.setCoastTimes([]),this.setAnswerResults([]),EditorManager_1.EditorManager.getStepCount?this._stepCount=EditorManager_1.EditorManager.getStepCount():this._stepCount=t,GameMsg_1.default.request_level_info({levelCount:this._levelCount,curLevel:this._curLevelId+1})},ReportManagerClass.prototype.replayGame=function(){this._result=[],++this._playIndex,this.isAllOver=!1,this._isReportedGameOver=!1,this._curLevelId=0;for(var t=0;t<this._levelCount;t++){var e=this._levelCount>1?ConstValue_1.ConstValue.GameName+"_\u7b2c"+(t+1)+"\u5173":ConstValue_1.ConstValue.GameName,n=new ExtraLevelData;n.id=t+1,n.question_info=e,this._result.push(n)}this._levelStartTime=Date.now(),this.setTryCounts([]),this.setCorrectCounts([]),this.setCoastTimes([]),this.setAnswerResults([]),GameMsg_1.default.request_level_info({levelCount:this._levelCount,curLevel:this._curLevelId+1})},ReportManagerClass.prototype.reportLevelResult=function(t,e){if(void 0===e&&(e=!0),void 0!==this._result[this._curLevelId]){var n=Date.now();this.addCoastTime(n),this.addTryCount(t);var o=AnswerResult.NoAnswer;o=t?e?AnswerResult.AnswerRight:AnswerResult.AnswerHalf:AnswerResult.AnswerError,this.setAnswerResultByLevel(this._curLevelId,o);var a=this.getReportData();a.gameOver=null,console.log(a),GameMsg_1.default.answerSyncSend(a),e&&(++this._curLevelId,this._levelStartTime=Date.now(),this._curLevelId===this._levelCount?(this.isAllOver=!0,this.reportGameOver()):GameMsg_1.default.request_level_info({levelCount:this._levelCount,curLevel:this._curLevelId+1}))}},ReportManagerClass.prototype.reportGameOver=function(){if(!this._isReportedGameOver){var t=this.getReportData();console.log(t),GameMsg_1.default.gameOver(t),GameMsg_1.default.gameStatisticData(t.ext),this._isReportedGameOver=!0}},ReportManagerClass.prototype.getResultData=function(t){for(var e=0;e<this._result.length;++e){var n=this._result[e],o=n.id-1,a=this.getAnswerResults()[o]||AnswerResult.NoAnswer,r=this.getTryCounts()[o]||0,i=this.getCorrectCounts()[o]||0,s=r-i,c=Math.ceil((this.getCoastTimes()[o]||0)/1e3);n.answer_res=a,n.answer_num=r,n.correct_num=i,n.wrong_num=s,n.answer_time=c}if(t)return this._result;var p=[];return this._result.forEach(function(t){var e=new LevelData;e.id=t.id,e.question_info=t.question_info,e.answer_res=t.answer_res,e.answer_num=t.answer_num,e.answer_time=t.answer_time,p.push(e)}),p},ReportManagerClass.prototype.getGameOverData=function(isExtra){var totalTryCount=eval(this.getTryCounts().join("+"));totalTryCount=totalTryCount||0;var totalCorrectCount=eval(this.getCorrectCounts().join("+"));totalCorrectCount=totalCorrectCount||0;var totalWrongCount=totalTryCount-totalCorrectCount,totalTimes=eval(this.getCoastTimes().join("+"));totalTimes=totalTimes||0;var gameOver=null;return isExtra?(gameOver=new ExtraGameOverData,gameOver.game_correct_num=totalCorrectCount,gameOver.game_wrong_num=totalWrongCount,gameOver.cur_level_id=Math.min(this._curLevelId+1,this._levelCount),gameOver.total_level_num=this._levelCount,gameOver.star_num=this.getStarCount(),gameOver.step_count=this._stepCount):gameOver=new GameOverData,gameOver.percentage=this.isAllOver?Math.round(totalCorrectCount/totalTryCount*100):0,gameOver.answer_all_time=Math.ceil(totalTimes/1e3),gameOver.complete_degree=this.isAllOver?100:Math.ceil(totalCorrectCount/this._stepCount*100),gameOver.answer_all_state=0===totalTryCount?AnswerResult.NoAnswer:this.isAllOver?AnswerResult.AnswerRight:AnswerResult.AnswerHalf,gameOver},ReportManagerClass.prototype.getExtraData=function(){var t=new ExtraData;return t.type=this._type,t.index=this._playIndex,t.result=this.getResultData(!0),t.gameOver=this.getGameOverData(!0),t},ReportManagerClass.prototype.getReportData=function(){var t=new ReportData;return t.type=this._type,t.index=this._playIndex,t.result=this.getResultData(!1),t.gameOver=this.getGameOverData(!1),t.ext=this.getExtraData(),t},ReportManagerClass.prototype.getStarCount=function(){var t=this.getGameOverData(!1);return t.percentage>=this._startLevelConfig[0]?3:t.percentage>=this._startLevelConfig[1]?2:t.percentage>this._startLevelConfig[2]?1:0},ReportManagerClass.prototype.getSyncData=function(){return{bReportedGameOver:this._isReportedGameOver,playCount:this._playIndex,startTime:this._levelStartTime,coastTimes:this.getCoastTimes(),tryCounts:this.getTryCounts(),correctCounts:this.getCorrectCounts(),curLevelId:this._curLevelId,bFinished:this.isAllOver,answerResults:this.getAnswerResults()}},ReportManagerClass.prototype.setSyncData=function(t){this._isReportedGameOver=t.bReportedGameOver,this._playIndex=t.playCount,this._levelStartTime=t.startTime,this.setCoastTimes(t.coastTimes),this.setTryCounts(t.tryCounts),this.setCorrectCounts(t.correctCounts),this._curLevelId=t.curLevelId,this.isAllOver=t.bFinished,this.setAnswerResults(t.answerResults),GameMsg_1.default.request_level_info({levelCount:this._levelCount,curLevel:this._curLevelId+1})},ReportManagerClass._instance=null,ReportManagerClass}(),AnswerResult;exports.ReportManager=ReportManagerClass.getInstance(),function(t){t.AnswerError="answer_error",t.AnswerRight="answer_right",t.AnswerHalf="answer_half",t.NoAnswer="no_answer"}(AnswerResult=exports.AnswerResult||(exports.AnswerResult={}));var LevelData=function(){this.id=0,this.question_info="",this.answer_res=AnswerResult.NoAnswer,this.answer_num=0,this.answer_time=0};exports.LevelData=LevelData;var ExtraLevelData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.correct_num=0,e.wrong_num=0,e}return __extends(e,t),e}(LevelData);exports.ExtraLevelData=ExtraLevelData;var GameOverData=function(){this.percentage=0,this.answer_all_state=AnswerResult.NoAnswer,this.answer_all_time=0,this.complete_degree=0};exports.GameOverData=GameOverData;var ExtraGameOverData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game_correct_num=0,e.game_wrong_num=0,e.cur_level_id=1,e.total_level_num=0,e.star_num=0,e.step_count=0,e}return __extends(e,t),e}(GameOverData);exports.ExtraGameOverData=ExtraGameOverData;var ExtraData=function(){this.type="txt",this.index=1,this.result=[],this.gameOver=new ExtraGameOverData};exports.ExtraData=ExtraData;var ReportData=function(){this.type="txt",this.index=1,this.result=[],this.gameOver=new GameOverData,this.ext=new ExtraData};exports.ReportData=ReportData,cc._RF.pop()},{"../../../game/scripts/Data/ConstValue":"ConstValue","../../../game/scripts/Manager/EditorManager":"EditorManager","../SDK/GameMsg":"GameMsg"}],SkeletonExt:[function(t,e){"use strict";cc._RF.push(e,"b17bdM6/FlI8aRFdqpwmXvl","SkeletonExt"),cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){cc.js.mixin(sp.Skeleton.prototype,{update:function(t){if(!this.paused)if(t*=this.timeScale*sp.timeScale,this.isAnimationCached()){if(this._isAniComplete){if(0===this._animationQueue.length&&!this._headAniInfo){var e=this._frameCache;if(e&&e.isInvalid()){e.updateToFrame();var n=e.frames;this._curFrame=n[n.length-1]}return}if(this._headAniInfo||(this._headAniInfo=this._animationQueue.shift()),this._accTime+=t,this._accTime>this._headAniInfo.delay){var o=this._headAniInfo;this._headAniInfo=null,this.setAnimation(0,o.animationName,o.loop)}return}this._updateCache(t)}else this._updateRealtime(t)}})}),cc._RF.pop()},{}],SoundManager:[function(t,e,n){"use strict";cc._RF.push(e,"e0cd2sRJnFGkbmE879tvukm","SoundManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.SoundManager=n.MusicType=void 0;var o=t("../Data/FrameConstValue"),a=t("../Data/FrameMsgType"),r=t("../Http/NetWork"),i=t("../SDK/GameMsg"),s=t("./ListenerManager"),c=t("./UIManager");(function(t){t.BGM_MUSIC="BGM_MUSIC",t.TITLE_AUDIO="TITLE_AUDIO",t.GAME_EFFECT="GAME_EFFECT",t.GAME_AUDIO="GAME_AUDIO"})(n.MusicType||(n.MusicType={}));var p=function(){function t(){this.playing_sound=new Object,this.bgm="",this.bgmIndex=-1,this._audioList=new Map,this._effectList=new Map,this._referenceList=new Map,this._titleID=null,this._audioClipMap=new Map,this.MUSIC_BGM="bgm",this.AUDIO_TITLE="audio_sound"}return t.prototype.start=function(){i.default.addEvent(a.FrameMsgType.PLAYBGM,this.playBGM.bind(this)),i.default.addEvent(a.FrameMsgType.RESUMEBGM,this.resumeBGM.bind(this)),i.default.addEvent(a.FrameMsgType.STOPBGM,this.stopBGM.bind(this)),i.default.addEvent(a.FrameMsgType.PLAYAUDIOTITLE,this.playAudioTitle.bind(this)),i.default.addEvent(a.FrameMsgType.STOPAUDIOTITLE,this.stopAudioTitle.bind(this)),i.default.addEvent(a.FrameMsgType.STOPALLAUDIO,this.stopAllAudio.bind(this)),i.default.addEvent(a.FrameMsgType.STOPALLEFFECT,this.stopAllEffect.bind(this)),i.default.addEvent(a.FrameMsgType.STOPALL,this.stopAll.bind(this))},t.getInstance=function(){return null===this._instance&&(this._instance=new t),this._instance},t.prototype.getAudioClip=function(t){return this._audioClipMap.has(t)?this._audioClipMap.get(t):(cc.log("\u672a\u7f13\u5b58\u7684\u97f3\u9891\u8d44\u6e90: "+t),null)},t.prototype.preLoadResAudio=function(t){var e=this,n=o.FrameConstValue.GAME_AUDIO_DIR;cc.resources.loadDir(n,cc.AudioClip,function(n,o){if(n)return cc.error(n),void t(!1);o.forEach(function(t){e._audioClipMap.set(t.name,t),e._referenceList.set(t.name,0)}),t(!0)})},t.prototype.preLoadFrameAudio=function(t){var e=this,n=o.FrameConstValue.FRAME_AUDIO_DIR;cc.assetManager.loadBundle("frameRes",function(o,a){if(o)return cc.error(o),void t(!1);a.loadDir(n,cc.AudioClip,function(n,o){if(n)return cc.error(n),void t(!1);o.forEach(function(t){e._audioClipMap.set(t.name,t),e._referenceList.set(t.name,0)}),t(!0)})})},t.prototype.preLoadAllAudioClips=function(t){var e=!1,n=!1;this.preLoadResAudio(function(o){o&&cc.log("\u7f13\u5b58\u5b8c\u6bd5! preLoadResAudio "),(e=!0)&&n&&t(!0)}),this.preLoadFrameAudio(function(o){o&&cc.log("\u7f13\u5b58\u5b8c\u6bd5! preLoadFrameAudio "),n=!0,e&&n&&t(!0)})},t.prototype.preloadAudioClipName=function(t,e){var n=this,a=o.FrameConstValue.GAME_AUDIO_DIR+t;cc.log("preloadAudioClipName path == "+a),cc.resources.load(a,cc.AudioClip,function(o,a){if(o)cc.error(o);else{var r=a;n._audioClipMap.set(t,r),n._referenceList.set(t,0),cc.log("\u7f13\u5b58\u5b8c\u6bd5!"),e()}})},t.prototype.playBGM=function(t){var e=this;if(void 0===t&&(t=""),c.UIManager.isGameShowing){if("blackboard"!=r.NetWork.channel&&!Boolean(r.NetWork.isSync)){""==t&&(t=this.MUSIC_BGM),this.bgm=t,this.bgmIndex=-1,cc.audioEngine.stopMusic();var n=o.FrameConstValue.GAME_AUDIO_DIR+t;cc.resources.load(n,cc.AudioClip,function(t,n){if(t)cc.error(t);else{var o=n;e.bgmIndex=cc.audioEngine.playMusic(o,!0)}})}}else cc.warn("\u4e0d\u8981\u5728GamePanel\u7684onLoad\u548cstart\u91cc\u64ad\u653e\u97f3\u9891\uff01")},t.prototype.resumeBGM=function(){cc.audioEngine.stopMusic();var t=o.FrameConstValue.GAME_AUDIO_DIR+this.bgm;cc.resources.load(t,cc.AudioClip,function(t,e){if(t)cc.error(t);else{var n=e;cc.audioEngine.playMusic(n,!0)}})},t.prototype.stopBGM=function(){this.bgm="",this.bgmIndex=-1,cc.audioEngine.stopMusic()},t.prototype.setMusicVolume=function(t,e){var n=this;if(void 0===e&&(e=0),-1!=this.bgmIndex)if(t=cc.misc.clamp01(t),0==e)cc.audioEngine.setVolume(this.bgmIndex,t);else{var o={v:cc.audioEngine.getVolume(this.bgmIndex)};cc.tween(o).to(e,{v:t},{progress:function(t,e,o,a){var r=t+(e-t)*a;cc.audioEngine.setVolume(n.bgmIndex,r)}}).start()}},t.prototype.playAudioTitle=function(t,e,n,o,a){void 0===e&&(e=!1),void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===a&&(a=null),this.playAudio(t,e,n,o,a,!0)},t.prototype.stopAudioTitle=function(){var t=this;this._audioList.forEach(function(e,n){null!=t._titleID&&t._titleID===e&&(t._audioList.delete(n),cc.audioEngine.stopEffect(e))}),this._titleID=null,s.ListenerManager.dispatch(a.FrameMsgType.COMPLETE_TRUMPET)},t.prototype.playAudio=function(t,e,o,a,r,i){var s=this;if(void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===r&&(r=null),void 0===i&&(i=!1),c.UIManager.isGameShowing){if(t){o&&this.stopAllAudio(),a&&this.stopAllEffect();var p=null;if("string"==typeof t){if(null==(p=this.getAudioClip(t)))return void n.SoundManager.preloadAudioClipName(t,function(){p=this._audioClipMap.get(t),this.playAudio(p,e,o,a,r,i)}.bind(this))}else p=t;var l=cc.audioEngine.playEffect(p,e);i&&(this._titleID=l,cc.log("this._titleID == "+this._titleID)),this._audioList.set(p.name,l);var u=this._referenceList.get(p.name);this._referenceList.set(p.name,u++),cc.audioEngine.setFinishCallback(l,function(){var t=s._referenceList.get(p.name);t--<=0&&s.stopSoundByName(p.name),s._referenceList.set(p.name,t<0?0:t),setTimeout(function(){r&&r()},100)})}}else cc.warn("\u4e0d\u8981\u5728GamePanel\u7684onLoad\u548cstart\u91cc\u64ad\u653e\u97f3\u9891\uff01")},t.prototype.playEffect=function(t,e,o,a,r){var i=this;if(void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===r&&(r=null),c.UIManager.isGameShowing){if(t){o&&this.stopAllEffect(),a&&this.stopAllAudio();var s=null;if("string"==typeof t){if(null==(s=this.getAudioClip(t)))return void n.SoundManager.preloadAudioClipName(t,function(){s=this._audioClipMap.get(t),this.playEffect(s,e,o,a,r)}.bind(this))}else s=t;var p=cc.audioEngine.playEffect(s,e);this._effectList.set(s.name,p);var l=this._referenceList.get(s.name);this._referenceList.set(s.name,l++),cc.audioEngine.setFinishCallback(p,function(){var t=i._referenceList.get(s.name);t--<=0&&i.stopSoundByName(s.name),i._referenceList.set(s.name,t<0?0:t),setTimeout(function(){r&&r()},100)})}}else cc.warn("\u4e0d\u8981\u5728GamePanel\u7684onLoad\u548cstart\u91cc\u64ad\u653e\u97f3\u9891\uff01")},t.prototype.setEffectVolume=function(t){t=cc.misc.clamp01(t),this._audioList.forEach(function(e){cc.audioEngine.setVolume(e,t)})},t.prototype.stopAllAudio=function(){var t=this;this._audioList.forEach(function(e,n){null!=t._titleID&&t._titleID===e&&s.ListenerManager.dispatch(a.FrameMsgType.COMPLETE_TRUMPET),t._referenceList.set(n,0),cc.audioEngine.stopEffect(e)}),this._audioList=new Map,this._titleID=null},t.prototype.stopAllEffect=function(){var t=this;this._effectList.forEach(function(e,n){t._referenceList.set(n,0),cc.audioEngine.stopEffect(e)}),this._effectList=new Map},t.prototype.stopSoundByName=function(t){this._referenceList.set(t,0);var e=this._audioList.get(t);null!=e&&-1!=e&&(cc.audioEngine.stop(e),this._audioList.delete(t)),null!=(e=this._effectList.get(t))&&-1!=e&&(cc.audioEngine.stop(e),this._effectList.delete(t))},t.prototype.stopAll=function(){this.stopAllAudio(),this.stopAllEffect(),cc.audioEngine.stopAll()},t.prototype.isPlaying=function(t){var e=this._audioList.get(t);return null!=e&&-1!=e||null!=(e=this._effectList.get(t))&&-1!=e},t._instance=null,t}();n.SoundManager=p.getInstance(),cc._RF.pop()},{"../Data/FrameConstValue":"FrameConstValue","../Data/FrameMsgType":"FrameMsgType","../Http/NetWork":"NetWork","../SDK/GameMsg":"GameMsg","./ListenerManager":"ListenerManager","./UIManager":"UIManager"}],StarCount:[function(t,e,n){"use strict";cc._RF.push(e,"a1fbe+gSexDOJnHjY6RnoVI","StarCount");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./../../Manager/SoundManager"),s=t("../../Utils/Tools"),c=t("../BaseFrameUI"),p=t("../../../../game/scripts/Manager/EditorManager"),l=t("../../Manager/ReportManager"),u=t("../../Utils/UIHelp"),h=t("../../../../game/scripts/Data/ConstValue"),d=cc._decorator,f=d.ccclass,_=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._btn_replay=null,e._sp_like_youxiao=null,e._sp_like_xiaodi=null,e._sp_yuwen=null,e._sp_yingyu=null,e.audioList=["","star_good","star_great","star_perfect"],e}return a(e,t),e.prototype.onLoad=function(){this._sp_like_youxiao&&(this._sp_like_youxiao.active=!1),this._sp_like_xiaodi&&(this._sp_like_xiaodi.active=!1),this._sp_yuwen&&(this._sp_yuwen.active=!1),this._sp_yingyu&&(this._sp_yingyu.active=!1)},e.prototype.showStars=function(t,e){var n;n=null==e?l.ReportManager.getStarCount():e,i.SoundManager.playEffect(this.audioList[n],!1),u.UIHelp.closeMask(),this._btn_replay&&(this._btn_replay.active=t);var o=h.ConstValue.Subject||1,a=null;switch(o){case 1:var r=p.EditorManager.getCoursewareLevel();if(r<0||r>2)return u.UIHelp.closeStarCount(),void u.UIHelp.showErrorPanel("coursewareLevel\u9519\u8bef\uff0c\u8bf7\u5728EditorManager\u4e2d\u8bbe\u7f6e\uff01");0===r?a=this._sp_like_youxiao&&this._sp_like_youxiao.getComponent(sp.Skeleton):1!==r&&2!==r||(a=this._sp_like_xiaodi&&this._sp_like_xiaodi.getComponent(sp.Skeleton));break;case 2:a=this._sp_yuwen&&this._sp_yuwen.getComponent(sp.Skeleton);break;case 3:a=this._sp_yingyu&&this._sp_yingyu.getComponent(sp.Skeleton)}a&&(a.node.active=!0,s.Tools.playSpine(a,"in_0"+n,!1,function(){s.Tools.playSpine(a,"idle_0"+n,!0)}))},e.className="StarCount",r([f],e)}(c.default));n.default=_,cc._RF.pop()},{"../../../../game/scripts/Data/ConstValue":"ConstValue","../../../../game/scripts/Manager/EditorManager":"EditorManager","../../Manager/ReportManager":"ReportManager","../../Utils/Tools":"Tools","../../Utils/UIHelp":"UIHelp","../BaseFrameUI":"BaseFrameUI","./../../Manager/SoundManager":"SoundManager"}],StartLayer:[function(t,e,n){"use strict";cc._RF.push(e,"91462UJDLNKiZP6y+8AhMUQ","StartLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../frame/scripts/Manager/SoundManager"),s=t("../../../../frame/scripts/Manager/SyncDataManager"),c=t("../../../../frame/scripts/Utils/Tools"),p=t("../../../../frame/scripts/Utils/UIHelp"),l=t("./GameLayer"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.n_startBtnMask=null,e.sp_startBtn=null,e.spf_startBtn=[],e.sp_guandao=null,e.sp_fangkuai=null,e.sp_aidi=null,e.sp_xiaohongtang=null,e.n_gameLayer=null,e}return a(e,t),e.prototype.handleReconnect=function(){p.UIHelp.closeMask();var t=s.SyncDataManager.getSyncData().customSyncData.stage;this.resetAllSpine(),this.node.opacity=255,this.node.scale=1,0==t[0]?this.n_startBtnMask.active=!0:1==t[0]&&this.syncProgress()},e.prototype.syncProgress=function(){switch(s.SyncDataManager.getSyncData().customSyncData.stage[1]){case 0:case 1:this.handleStart();break;case 2:this.prologue_2();break;case 3:this.playGuandaoAni();break;case 4:c.Tools.playSpine(this.sp_fangkuai,"A_ZCD6_0102_idle",!1),this.prologue_4();case 5:c.Tools.playSpine(this.sp_fangkuai,"A_ZCD6_0102_idle",!1),this.prologue_5()}},e.prototype.resetAllSpine=function(){i.SoundManager.stopAllEffect(),cc.Tween.stopAll(),this.sp_fangkuai.node.active=!1,c.Tools.playSpine(this.sp_aidi,"A_ZCD6_0104_idle",!0),c.Tools.playSpine(this.sp_xiaohongtang,"A_ZCD6_0103_idle",!0)},e.prototype.handleStart=function(){s.SyncDataManager.getSyncData().customSyncData.stage=[1,0],this.n_startBtnMask.active=!1,this.prologue_1()},e.prototype.prologue_1=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[1,1],c.Tools.playSpine(this.sp_aidi,"A_ZCD6_0104_idle",!0),c.Tools.playSpine(this.sp_xiaohongtang,"A_ZCD6_0103_speak2",!0),i.SoundManager.playEffect("V_ZCD6_0101",!1,!1,!1,function(){t.prologue_2()})},e.prototype.prologue_2=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[1,2],c.Tools.playSpine(this.sp_aidi,"A_ZCD6_0104_speak2",!0),c.Tools.playSpine(this.sp_xiaohongtang,"A_ZCD6_0103_idle",!0),i.SoundManager.playEffect("V_ZCD6_0102",!1,!1,!1,function(){c.Tools.playSpine(t.sp_aidi,"A_ZCD6_0104_idle",!0),t.playGuandaoAni()})},e.prototype.prologue_3=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[1,3],c.Tools.playSpine(this.sp_aidi,"A_ZCD6_0104_shock",!0),c.Tools.playSpine(this.sp_xiaohongtang,"A_ZCD6_0103_speak1",!1,function(){c.Tools.playSpine(t.sp_xiaohongtang,"A_ZCD6_0103_shock",!1,function(){c.Tools.playSpine(t.sp_xiaohongtang,"A_ZCD6_0103",!0)})}),i.SoundManager.playEffect("V_ZCD6_0103",!1,!1,!1,function(){t.prologue_4()})},e.prototype.prologue_4=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[1,4],c.Tools.playSpine(this.sp_aidi,"A_ZCD6_0104_speak1",!0),c.Tools.playSpine(this.sp_xiaohongtang,"A_ZCD6_0103_idle",!0),i.SoundManager.playEffect("V_ZCD6_0104",!1,!1,!1,function(){t.prologue_5()})},e.prototype.prologue_5=function(){var t=this;s.SyncDataManager.getSyncData().customSyncData.stage=[1,5],c.Tools.playSpine(this.sp_aidi,"A_ZCD6_0104_idle",!0),c.Tools.playSpine(this.sp_xiaohongtang,"A_ZCD6_0103_speak2",!0),i.SoundManager.playEffect("V_ZCD6_0105",!1,!1,!1,function(){t.transitionToGame()})},e.prototype.playGuandaoAni=function(){var t=this;c.Tools.playSpine(this.sp_guandao,"A_ZCD6_0109",!1,function(){t.fallFangkuai(),i.SoundManager.playEffect("F_ZCD6_0101",!1,!1,!1)})},e.prototype.fallFangkuai=function(){var t=this;this.sp_fangkuai.node.active=!0,c.Tools.playSpine(this.sp_fangkuai,"A_ZCD6_0102_appear",!1,function(){c.Tools.playSpine(t.sp_fangkuai,"A_ZCD6_0102_idle",!1),t.prologue_3()})},e.prototype.transitionToGame=function(){var t=this;cc.tween(this.node).to(.5,{scale:3.3}).start(),cc.tween(this.node).delay(.3).to(.5,{opacity:0}).start(),this.n_gameLayer.active=!0,this.n_gameLayer.opacity=0,cc.tween(this.n_gameLayer).to(.5,{opacity:255}).call(function(){t.n_gameLayer.getComponent(l.default).init(),t.node.active=!1}).start()},e.prototype.onClickStartBegin=function(){this.sp_startBtn.spriteFrame=this.spf_startBtn[1]},e.prototype.onClickStartEnd=function(){this.sp_startBtn.spriteFrame=this.spf_startBtn[0],this.handleStart()},e.prototype.onClickScreen=function(){i.SoundManager.stopAllEffect(),cc.Tween.stopAll(),this.transitionToGame()},r([d(cc.Node)],e.prototype,"n_startBtnMask",void 0),r([d(cc.Sprite)],e.prototype,"sp_startBtn",void 0),r([d(cc.SpriteFrame)],e.prototype,"spf_startBtn",void 0),r([d(sp.Skeleton)],e.prototype,"sp_guandao",void 0),r([d(sp.Skeleton)],e.prototype,"sp_fangkuai",void 0),r([d(sp.Skeleton)],e.prototype,"sp_aidi",void 0),r([d(sp.Skeleton)],e.prototype,"sp_xiaohongtang",void 0),r([d(cc.Node)],e.prototype,"n_gameLayer",void 0),r([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../../frame/scripts/Manager/SoundManager":"SoundManager","../../../../frame/scripts/Manager/SyncDataManager":"SyncDataManager","../../../../frame/scripts/Utils/Tools":"Tools","../../../../frame/scripts/Utils/UIHelp":"UIHelp","./GameLayer":"GameLayer"}],SubmissionPanel:[function(t,e,n){"use strict";cc._RF.push(e,"bdbeagD9lJH1p1yPQBbNwPK","SubmissionPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Http/NetWork"),s=t("../BaseFrameUI"),c=t("../../Utils/UIHelp"),p=t("../../../../game/scripts/Data/ConstValue"),l=t("../../../../game/scripts/Manager/EditorManager"),u=cc._decorator,h=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){},e.prototype.onQueDingBtnClick=function(){this.DetectionNet()},e.prototype.onQuXiaoBtnClick=function(){c.UIHelp.closeSubmissionPanel()},e.prototype.DetectionNet=function(){var t=this;if(i.NetWork.titleId){var e=JSON.stringify({CoursewareKey:p.ConstValue.CoursewareKey,data:l.EditorManager.getData()});i.NetWork.httpRequest(i.NetWork.GET_TITLE+"?title_id="+i.NetWork.titleId,"GET","application/json;charset=utf-8",function(n,o){if(!n)if(null==o.data.courseware_content||""==o.data.courseware_content)t.AddNet(e);else{i.NetWork.coursewareId=o.data.courseware_id;var a=JSON.parse(o.data.courseware_content);i.NetWork.empty||(a.CoursewareKey==p.ConstValue.CoursewareKey?t.ModifyNet(e):c.UIHelp.showErrorPanel("\u8be5titleId\u5df2\u88ab\u4f7f\u7528,\u8bf7\u8054\u7cfb\u6280\u672f\u8001\u5e08\u89e3\u51b3\uff01\ntitleId="+i.NetWork.titleId,"","","\u786e\u5b9a"))}},null)}else c.UIHelp.showErrorPanel("titleId\u4e3a\u7a7a,\u8bf7\u8054\u7cfb\u6280\u672f\u8001\u5e08\u89e3\u51b3\uff01\ntitleId="+i.NetWork.titleId,"","","\u786e\u5b9a")},e.prototype.AddNet=function(t){var e={title_id:i.NetWork.titleId,courseware_content:t,is_result:1,is_lavel:1,lavel_num:l.EditorManager.getLevelCount()};i.NetWork.httpRequest(i.NetWork.ADD,"POST","application/json;charset=utf-8",function(t){t||(c.UIHelp.showTip("\u7b54\u6848\u63d0\u4ea4\u6210\u529f"),c.UIHelp.closeSubmissionPanel())},JSON.stringify(e))},e.prototype.ModifyNet=function(t){var e={courseware_id:i.NetWork.coursewareId,courseware_content:t,is_result:1,is_lavel:1,lavel_num:l.EditorManager.getLevelCount()};i.NetWork.httpRequest(i.NetWork.MODIFY,"POST","application/json;charset=utf-8",function(t){t||(c.UIHelp.showTip("\u7b54\u6848\u4fee\u6539\u6210\u529f"),c.UIHelp.closeSubmissionPanel())},JSON.stringify(e))},e.className="SubmissionPanel",r([h],e)}(s.default));n.default=d,cc._RF.pop()},{"../../../../game/scripts/Data/ConstValue":"ConstValue","../../../../game/scripts/Manager/EditorManager":"EditorManager","../../Http/NetWork":"NetWork","../../Utils/UIHelp":"UIHelp","../BaseFrameUI":"BaseFrameUI"}],SyncDataManager:[function(t,e,n){"use strict";cc._RF.push(e,"30e46ZgmPlO+5CRM3r8Ls4a","SyncDataManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.SyncDataManager=n.SyncData=void 0;var o=t("../../../frame/scripts/Data/FrameSyncData"),a=t("../../../frame/scripts/Manager/ReportManager"),r=t("../../../game/scripts/Data/CustomSyncData"),i=function(){this.reportData=null,this.customSyncData=new r.CustomSyncData,this.frameSyncData=new o.FrameSyncData};n.SyncData=i;var s=function(){function t(){this._syncData=new i}return t.getInstance=function(){return null===this._instance&&(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"syncData",{get:function(){return this.getSyncData()},set:function(t){this.setSyncData(t)},enumerable:!1,configurable:!0}),t.prototype.initSyncData=function(){this._syncData=new i},t.prototype.getSyncData=function(){return this._syncData.reportData=a.ReportManager.getSyncData(),this._syncData},t.prototype.setSyncData=function(t){this._syncData=t,a.ReportManager.setSyncData(t.reportData)},t.prototype.replay=function(){var t=this._syncData.frameSyncData.actionId,e=this._syncData.frameSyncData.hasReplayCount+1;this._syncData=new i,this._syncData.frameSyncData.actionId=t,this._syncData.frameSyncData.hasReplayCount=e},t._instance=null,t}();n.SyncDataManager=s.getInstance(),cc._RF.pop()},{"../../../frame/scripts/Data/FrameSyncData":"FrameSyncData","../../../frame/scripts/Manager/ReportManager":"ReportManager","../../../game/scripts/Data/CustomSyncData":"CustomSyncData"}],T2M:[function(t,e,n){"use strict";cc._RF.push(e,"a7e393z1URF/Jne7MDcTxH+","T2M");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),a=0;for(e=0;e<n;e++)for(var r=arguments[e],i=0,s=r.length;i<s;i++,a++)o[a]=r[i];return o};Object.defineProperty(n,"__esModule",{value:!0}),n.T2M=n.T2MClass=n.SendData=n.Action=void 0;var a=t("../Data/FrameMsgType"),r=t("../Http/NetWork"),i=t("../Manager/ListenerManager"),s=t("../Manager/SyncDataManager"),c=t("../Utils/UIHelp"),p=t("./GameMsg"),l=function(){this.type="",this.syncData=JSON.parse(JSON.stringify(s.SyncDataManager.getSyncData())),this.data=null};n.Action=l;var u=function(t,e){this.isHeartBreak=!1,this.data=[],this.isHeartBreak=t||!1,this.data=e||[]};n.SendData=u;var h=function(){function t(){this._map=new Map,this._isSync=!1,this._isInit=!1,this._cacheList=[],this._waitRunActionList=[],this._sendTime=0,this._lastEventTime=0,this.isRecover=!1,this._heartCount=0,this._heartInterval=1e3,this._fastHeartCount=4}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.init=function(){this.setSync(r.NetWork.isSync),this._isInit||(p.default.recv_sync_data(this.actionSyncHandler.bind(this)),this._lastSendTime=Date.now(),this.addSyncEventListener(a.FrameMsgType.ON_HEART_BREAK,this.onHeartBreak.bind(this)),this.setFastHeartBreakState(),this._isInit=!0,p.default.request_sync_init())},t.prototype.onReturnToTeacherPanel=function(){this._isSync=!1},t.prototype.setSync=function(t){this._isSync=t},t.prototype.addSyncEventListener=function(t,e){this._map.set(t,e)},t.prototype.removeSyncEventListener=function(t){this._map.has(t)&&this._map.delete(t)},t.prototype.dispatch=function(t,e,n){void 0===n&&(n=!0);var o=new l;if(o.type=t,o.data=e,this._isSync){if(a.FrameMsgType.ON_HEART_BREAK===t){var r=new u(!0,[o]);p.default.send_sync_data(r)}else o.syncData=null,n?this._cacheList.push(o):(r=new u(!1,[o]),p.default.send_sync_data(r));this._sendTime=Date.now()}else this._map.has(t)?a.FrameMsgType.ON_HEART_BREAK!==t&&this._map.get(t)(e):console.log("Listener type is null! type = "+t)},t.prototype.onHeartBreak=function(t){if(s.SyncDataManager.syncData.frameSyncData.actionId!==t.frameSyncData.actionId&&i.ListenerManager.dispatch(a.FrameMsgType.ON_RECOVERY_DATA,t),!this.isRecover){this.isRecover=!0,c.UIHelp.closeRecoverMask(),-999!==t.frameSyncData.actionId&&i.ListenerManager.dispatch(a.FrameMsgType.ON_FIRST_BREAK,null);var e=JSON.stringify(t);console.log("SyncData length: ",e.length),e.length>5120&&console.warn("\u5fc3\u8df3\u6570\u636e\u91cf\u8fc7\u5927\uff01 dataStr.length: ",e.length)}},t.prototype.update=function(){this._isInit&&(this.sendSyncEvent(),this.sendHeartBreak(),this.runActions())},t.prototype.sendSyncEvent=function(){if(Date.now()-this._lastSendTime>=50){if(this._cacheList.length>0){var t=new u(!1,this._cacheList);p.default.send_sync_data(t),this._cacheList=[],this._sendTime=Date.now()}this._lastSendTime=Date.now()}},t.prototype.setFastHeartBreakState=function(){this._sendTime=0,this._heartCount=0,this._heartInterval=1e3},t.prototype.sendHeartBreak=function(){Date.now()-this._sendTime>this._heartInterval&&(r.NetWork.isSupportKeepPlay||r.NetWork.isMaster)&&(this.dispatch(a.FrameMsgType.ON_HEART_BREAK,null,!1),this._sendTime=Date.now(),++this._heartCount,this._fastHeartCount===this._heartCount&&(this._heartInterval=3e3),cc.log("sendHeartBreak"))},t.prototype.actionSyncHandler=function(t){var e=t.data.data;if(!e){var n=new l;return n.type=a.FrameMsgType.ON_HEART_BREAK,e=[n],t.data.data=e,void this.onHeartBreakHandler(t)}1!==e.length||a.FrameMsgType.ON_HEART_BREAK!==e[0].type?(r.NetWork.isSupportKeepPlay||r.NetWork.isMaster||this.isRecover)&&(0==this._waitRunActionList.length?this._waitRunActionList=o(e):this._waitRunActionList=o(this._waitRunActionList,e),this._lastEventTime=Date.now()):r.NetWork.isMaster||this.onHeartBreakHandler(t)},t.prototype.onHeartBreakHandler=function(t){var e=t.data.data;Date.now()-this._lastEventTime>2e3&&(0==this._waitRunActionList.length?this._waitRunActionList=o(e):this._waitRunActionList=o(this._waitRunActionList,e))},t.prototype.runActions=function(){var t=this._waitRunActionList.length;if(t>0){var e=Date.now()-this._lastUpdateTime,n=Math.floor(e/7),o=Math.min(t,n),r=this._waitRunActionList[0];if(a.FrameMsgType.ON_HEART_BREAK!==r.type)for(var i=0;i<o;i++){var c=this._waitRunActionList.shift();this._map.has(c.type)&&this._map.get(c.type)(c.data),++s.SyncDataManager.syncData.frameSyncData.actionId}else this._waitRunActionList.shift(),this._map.get(r.type)(r.syncData)}this._lastUpdateTime=Date.now()},t._instance=null,t}();n.T2MClass=h,n.T2M=h.getInstance(),cc._RF.pop()},{"../Data/FrameMsgType":"FrameMsgType","../Http/NetWork":"NetWork","../Manager/ListenerManager":"ListenerManager","../Manager/SyncDataManager":"SyncDataManager","../Utils/UIHelp":"UIHelp","./GameMsg":"GameMsg"}],TeacherPanelLoading:[function(t,e,n){"use strict";cc._RF.push(e,"75b2dk5WVVO7LtxMPb6Uw7K","TeacherPanelLoading");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Data/FrameMsgType"),s=t("../../Manager/ListenerManager"),c=t("../BindNode"),p=cc._decorator,l=p.ccclass,u=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nd_panel=null,e}return a(e,t),e.prototype.start=function(){s.ListenerManager.on(i.FrameMsgType.TEACHER_PANEL_LOADING,this.onEnableEvent,this)},e.prototype.onDestroy=function(){s.ListenerManager.removeAll(this)},e.prototype.onEnableEvent=function(t){this._nd_panel.active=t},r([l],e)}(c.default));n.default=u,cc._RF.pop()},{"../../Data/FrameMsgType":"FrameMsgType","../../Manager/ListenerManager":"ListenerManager","../BindNode":"BindNode"}],TeacherPanel:[function(t,e,n){"use strict";cc._RF.push(e,"70c27EBmWdPJYtgMQ9dyPZS","TeacherPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../frame/scripts/Data/FrameMsgType"),s=t("../../../../frame/scripts/Manager/ListenerManager"),c=t("../../../../frame/scripts/Manager/ReportManager"),p=t("../../../../frame/scripts/Manager/UIManager"),l=t("../../../../frame/scripts/UI/Panel/BaseTeacherPanel"),u=t("../../../../frame/scripts/Utils/UIHelp"),h=t("../../Data/ConstValue"),d=t("../../Manager/EditorManager"),f=t("./GamePanel"),_=cc._decorator,g=_.ccclass,y=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toggle_stars=null,e.toggle_replay=null,e.toggle_titleAudio=null,e.toggle_guideAudio=null,e._layout_defOptions=null,e._btn_save=null,e._btn_view=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this);var e=d.EditorManager.isSupportEdit();this._btn_save&&(this._btn_save.active=!e),this._layout_defOptions.active=!1},e.prototype.setPanel=function(){this._layout_defOptions.active=!0,t.prototype.setPanel.call(this),this.toggle_guideAudio.node.parent.active=h.ConstValue.Editor_CanShowGuide,this.toggle_stars.node.parent.active=h.ConstValue.Editor_CanShowStars,this.toggle_titleAudio.node.parent.active=h.ConstValue.Editor_CanShowAutoPlayTitle,this.toggle_stars.toggleItems[d.EditorManager.editorData.isStarCount?0:1].isChecked=!0,this.toggle_replay.toggleItems[d.EditorManager.editorData.isReplay?0:1].isChecked=!0,this.toggle_titleAudio.toggleItems[d.EditorManager.editorData.isPlayTitle?0:1].isChecked=!0,this.toggle_guideAudio.toggleItems[d.EditorManager.editorData.isPlayGuide?0:1].isChecked=!0},e.prototype.onToggleStar=function(t){var e=this.toggle_stars.toggleItems.indexOf(t);d.EditorManager.editorData.isStarCount=0===e},e.prototype.onToggleReplay=function(t){var e=this.toggle_replay.toggleItems.indexOf(t);d.EditorManager.editorData.isReplay=0===e},e.prototype.onToggleTitleAudio=function(t){var e=this.toggle_titleAudio.toggleItems.indexOf(t);d.EditorManager.editorData.isPlayTitle=0===e},e.prototype.onToggleGuideAudio=function(t){var e=this.toggle_guideAudio.toggleItems.indexOf(t);d.EditorManager.editorData.isPlayGuide=0===e},e.prototype.onBtnSaveClicked=function(){!d.EditorManager.isSupportEdit()||c.ReportManager.isAllOver?u.UIHelp.showSubmissionPanel():u.UIHelp.showTip("\u8bf7\u5148\u5b8c\u6210\u4e00\u904d\u9898\u76ee")},e.prototype.onBtnViewClicked=function(){-1===d.EditorManager.getCoursewareLevel()||null===d.EditorManager.getCoursewareLevel()||void 0===d.EditorManager.getCoursewareLevel()?u.UIHelp.showTip("\u8bf7\u5148\u8bbe\u7f6ecoursewareLevel"):(s.ListenerManager.dispatch(i.FrameMsgType.TEACHER_PANEL_LOADING,!0),p.UIManager.showUI(f.default))},e.className="TeacherPanel",r([y(cc.ToggleContainer)],e.prototype,"toggle_stars",void 0),r([y(cc.ToggleContainer)],e.prototype,"toggle_replay",void 0),r([y(cc.ToggleContainer)],e.prototype,"toggle_titleAudio",void 0),r([y(cc.ToggleContainer)],e.prototype,"toggle_guideAudio",void 0),r([y(cc.Node)],e.prototype,"_layout_defOptions",void 0),r([g],e)}(l.default);n.default=v,cc._RF.pop()},{"../../../../frame/scripts/Data/FrameMsgType":"FrameMsgType","../../../../frame/scripts/Manager/ListenerManager":"ListenerManager","../../../../frame/scripts/Manager/ReportManager":"ReportManager","../../../../frame/scripts/Manager/UIManager":"UIManager","../../../../frame/scripts/UI/Panel/BaseTeacherPanel":"BaseTeacherPanel","../../../../frame/scripts/Utils/UIHelp":"UIHelp","../../Data/ConstValue":"ConstValue","../../Manager/EditorManager":"EditorManager","./GamePanel":"GamePanel"}],TipUI:[function(t,e,n){"use strict";cc._RF.push(e,"04f62OpblhMYb6+AOI+oOHr","TipUI");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.TipUI=void 0;var i=t("../BaseFrameUI"),s=t("../Item/Tip"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipPrefab=null,e.tipPool=[],e}return a(e,t),e.prototype.showTip=function(t){for(var e=0;e<this.tipPool.length;e++)if(!this.tipPool[e].isReady())return this.tipPool[e].reset(),void this.tipPool[e].playTip(t);for(var n=0;n<this.tipPool.length;++n)if(null!=this.tipPool[n]&&this.tipPool[n].isReady())return this.tipPool[n].node.setSiblingIndex(200),void this.tipPool[n].playTip(t);var o=cc.instantiate(this.tipPrefab);o.parent=this.node;var a=o.getComponent(s.Tip);this.tipPool.push(a),a.playTip(t)},e.className="TipUI",r([l(cc.Prefab)],e.prototype,"tipPrefab",void 0),r([p],e)}(i.default);n.TipUI=u,cc._RF.pop()},{"../BaseFrameUI":"BaseFrameUI","../Item/Tip":"Tip"}],Tip:[function(t,e,n){"use strict";cc._RF.push(e,"c7373SoEY5LDIC2BLTSmOq3","Tip");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.Tip=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.neiRongNode=null,e.tipLabel=null,e.ready=!0,e}return a(e,t),e.prototype.playTip=function(t){var e=this;this.neiRongNode.active=!0,this.node.stopAllActions(),this.ready=!1,this.tipLabel.string=t,this.reset(),cc.tween(this.node).delay(1).to(.5,{y:128,opacity:0}).call(function(){e.ready=!0}).start()},e.prototype.isReady=function(){return this.ready},e.prototype.reset=function(){this.node.setPosition(0,0),this.node.opacity=255},r([c(cc.Node)],e.prototype,"neiRongNode",void 0),r([c(cc.Label)],e.prototype,"tipLabel",void 0),r([s],e)}(cc.Component);n.Tip=p,cc._RF.pop()},{}],TitleNode:[function(t,e,n){"use strict";cc._RF.push(e,"b276fOW8MRNTqj/bpy0hngz","TitleNode");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Data/FrameMsgType"),s=t("../../Manager/ListenerManager"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bianJiLabel=null,e.jianYanLabel=null,e.tiaoNode=null,e.heiSe=cc.color(0,0,0),e.huiSe=cc.color(127,127,127),e}return a(e,t),e.prototype.start=function(){this.bianJiLabel.node.color=this.heiSe,this.jianYanLabel.node.color=this.huiSe,this.tiaoNode.color=this.huiSe,s.ListenerManager.on(i.FrameMsgType.ON_EDIT_STATE_SWITCHING,this.onStateSwitching,this)},e.prototype.onStateSwitching=function(t){0===t?(this.jianYanLabel.node.color=this.huiSe,this.tiaoNode.color=this.huiSe):(this.jianYanLabel.node.color=this.heiSe,this.tiaoNode.color=this.heiSe)},r([l(cc.Label)],e.prototype,"bianJiLabel",void 0),r([l(cc.Label)],e.prototype,"jianYanLabel",void 0),r([l(cc.Node)],e.prototype,"tiaoNode",void 0),r([p],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../Data/FrameMsgType":"FrameMsgType","../../Manager/ListenerManager":"ListenerManager"}],Tools:[function(t,e,n){"use strict";cc._RF.push(e,"8c9926FhnVH2Z4Gs2ZXOlDV","Tools");var o=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.Tools=n.ArtMoveParam=void 0;n.ArtMoveParam=function(t,e){this.time=0,this.pos=cc.Vec3.ZERO,this.time=t,this.pos=e};var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function t(){}return t.playSpine=function(t,e,n,o){void 0===o&&(o=null),t.setAnimation(0,e,n)&&t.setCompleteListener(function(t){(t.animation?t.animation.name:"")===e&&o&&o()})},t.getQueryVariable=function(t){if((e=window.location.href.split("?")).length<2)return!1;for(var e=e[1].split("&"),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t)return o[1]}return!1},t.runArtMoveSequence=function(t,e,n){void 0===n&&(n=null);var o=t.position.sub(e[e.length-1].pos);function a(t){return t.add(o)}if(t.setPosition(a(e[0].pos)),e.length<=1)n&&n();else{for(var r=[],i=1;i<e.length-1;i++){var s=.001*(e[i].time-e[i-1].time),c=a(e[i].pos);r.push(cc.moveTo(s,cc.v2(c.x,c.y)))}n&&r.push(cc.callFunc(n)),t.runAction(cc.sequence(r))}},t.getNowTimeMS=function(){return(new Date).getTime()},t.getNowTimeS=function(){return Math.floor(.001*(new Date).getTime())},t.getFormatTime=function(t){var e=Math.floor(t/60);e<10&&(e="0"+e);var n=t%60;return n<10&&(n="0"+n),e+":"+n},o([r],t)}());n.Tools=i,cc._RF.pop()},{}],UIHelp:[function(t,e,n){"use strict";cc._RF.push(e,"c44e6cLg85JzaIFNvBdsH7x","UIHelp"),Object.defineProperty(n,"__esModule",{value:!0}),n.UIHelp=void 0;var o=t("../../../game/scripts/UI/panel/GamePanel"),a=t("../../../game/scripts/UI/panel/TeacherPanel"),r=t("../Data/FrameMsgType"),i=t("../Manager/ListenerManager"),s=t("../Manager/UIManager"),c=t("../UI/Panel/AffirmTips"),p=t("../UI/Panel/ErrorPanel"),l=t("../UI/Panel/OverTips"),u=t("../UI/Panel/StarCount"),h=t("../UI/Panel/SubmissionPanel"),d=t("../UI/Panel/TipUI"),f=t("../UI/Panel/UploadAndReturnPanel"),_=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.showTip=function(t){var e=this,n=s.UIManager.getUI(d.TipUI);n?n.showTip(t):s.UIManager.openUI(d.TipUI,null,s.EPANEL_ZORDER.TIPS,function(){e.showTip(t)})},t.prototype.showOverTips=function(t,e,n,o,a,r,i){var c=this;void 0===e&&(e=""),void 0===n&&(n=null),void 0===r&&(r=!1),void 0===i&&(i=!0);var p=s.UIManager.getUI(l.OverTips);p?p.init(t,e,n,o,a,r,i):s.UIManager.openUI(l.OverTips,null,s.EPANEL_ZORDER.POPUP,function(){c.showOverTips(t,e,n,o,a,i)})},t.prototype.closeOverTips=function(){s.UIManager.closeUI(l.OverTips)},t.prototype.showStarCount=function(t,e){var n=this,o=s.UIManager.getUI(u.default);o?o.showStars(t,e):s.UIManager.openUI(u.default,null,s.EPANEL_ZORDER.POPUP,function(){n.showStarCount(t,e)})},t.prototype.closeStarCount=function(){s.UIManager.closeUI(u.default)},t.prototype.showAffirmTip=function(t,e,n,o,a){var r=this,i=s.UIManager.getUI(c.AffirmTips);i?i.init(t,e,n,o,a):s.UIManager.openUI(c.AffirmTips,null,s.EPANEL_ZORDER.POPUP,function(){r.showAffirmTip(t,e,n,o,a)})},t.prototype.closeAffirmTip=function(){s.UIManager.closeUI(c.AffirmTips)},t.prototype.showErrorPanel=function(t,e,n,o,a,r){var i=this;void 0===r&&(r=!1);var c=s.UIManager.getUI(p.default);c?c.setPanel(t,e,n,o,a,r):s.UIManager.openUI(p.default,null,s.EPANEL_ZORDER.ERROR,function(){i.showErrorPanel(t,e,n,o,a,r)})},t.prototype.closeErrorPanel=function(){s.UIManager.closeUI(p.default)},t.prototype.showUploadAndReturnPanel=function(){s.UIManager.showUI(f.default,null,s.EPANEL_ZORDER.SUBMISSION)},t.prototype.closeUploadAndReturnPanel=function(){s.UIManager.closeUI(f.default)},t.prototype.showSubmissionPanel=function(){s.UIManager.showUI(h.default,null,s.EPANEL_ZORDER.SUBMISSION)},t.prototype.closeSubmissionPanel=function(){s.UIManager.closeUI(h.default)},t.prototype.showGamePanel=function(t){s.UIManager.openUI(o.default,null,s.EPANEL_ZORDER.NORMAL,t)},t.prototype.closeGamePanel=function(){s.UIManager.closeUI(o.default)},t.prototype.showTeacherPanel=function(t){s.UIManager.openUI(a.default,null,s.EPANEL_ZORDER.NORMAL,t)},t.prototype.closeTeacherPanel=function(){s.UIManager.closeUI(a.default)},t.prototype.showMask=function(t){void 0===t&&(t=!1),i.ListenerManager.dispatch(r.FrameMsgType.ON_MASK,!0,t)},t.prototype.closeMask=function(){i.ListenerManager.dispatch(r.FrameMsgType.ON_MASK,!1)},t.prototype.showRecoverMask=function(){i.ListenerManager.dispatch(r.FrameMsgType.MASK_RECOVER,!0)},t.prototype.closeRecoverMask=function(){i.ListenerManager.dispatch(r.FrameMsgType.MASK_RECOVER,!1)},t._instance=null,t}();n.UIHelp=_.getInstance(),cc._RF.pop()},{"../../../game/scripts/UI/panel/GamePanel":"GamePanel","../../../game/scripts/UI/panel/TeacherPanel":"TeacherPanel","../Data/FrameMsgType":"FrameMsgType","../Manager/ListenerManager":"ListenerManager","../Manager/UIManager":"UIManager","../UI/Panel/AffirmTips":"AffirmTips","../UI/Panel/ErrorPanel":"ErrorPanel","../UI/Panel/OverTips":"OverTips","../UI/Panel/StarCount":"StarCount","../UI/Panel/SubmissionPanel":"SubmissionPanel","../UI/Panel/TipUI":"TipUI","../UI/Panel/UploadAndReturnPanel":"UploadAndReturnPanel"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"fcb706mngZPXIeAjofYaIuT","UIManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,r){function i(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(s){r=[6,s],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EPANEL_ZORDER=n.UIManager=void 0;var r=t("../UI/BaseUI"),i=function(){function t(){this.uiList=[],this.uiRoot=null,this.stateList=new Object,this.isGameShowing=!0}return t.getInstance=function(){return null===this._instance&&(this._instance=new t),this._instance},t.prototype.loadUI=function(t,e,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return new Promise(function(o,a){var r=function(t,e,o){n&&n(t,e,o)},i=function(t,n){return t?(cc.log(t),a(null)):(e&&e(n),o(n))};t.isFramePanel?cc.assetManager.loadBundle("frameRes",function(e,n){if(e)return cc.error(e),a(null);n.load(t.getUrl(),r,i)}):cc.resources.load(t.getUrl(),r,i)})},t.prototype.openUI=function(t,e,n,i,s){for(var c=[],p=5;p<arguments.length;p++)c[p-5]=arguments[p];return o(this,void 0,void 0,function(){var o,p,l;return a(this,function(a){switch(a.label){case 0:return this.uiRoot||(this.uiRoot=cc.find("Canvas")),this.getUI(t)?[2,!0]:(this.stateList[t.className]=!0,[4,this.loadUI(t,function(){},s)]);case 1:return(o=a.sent())?this.getUI(t)?[2,!0]:this.stateList[t.className]?((p=cc.instantiate(o)).parent=this.uiRoot,n&&(p.zIndex=n),(l=p.getComponent(r.BaseUI)).data=e,l.tag=t,this.uiList.push(l),i&&i(c),[2,!0]):[2,!1]:[2,!1]}})})},t.prototype.closeUI=function(t){this.stateList[t.className]=!1;for(var e=0;e<this.uiList.length;++e)if(this.uiList[e].tag===t)return this.uiList[e].node.destroy(),void this.uiList.splice(e,1)},t.prototype.closeAllUI=function(){for(var t=0;t<this.uiList.length;++t){var e=this.uiList[t];this.stateList[e.name]=!1,e.node.destroy()}this.uiList=[]},t.prototype.showUI=function(t,e,n,r){return o(this,void 0,void 0,function(){var o,i;return a(this,function(a){switch(a.label){case 0:return(o=this.getUI(t))?(this.stateList[t.className]=!0,o.data=e,o.node.active=!0,o.onShow(),r&&r(),[2,!0]):[3,1];case 1:return[4,this.openUI(t,e,n)];case 2:return(i=a.sent())&&(r&&r(),this.getUI(t).onShow()),[2,i]}})})},t.prototype.hideUI=function(t){var e=this.getUI(t);e&&(this.stateList[t.className]=!1,e.node.active=!1)},t.prototype.getUI=function(t){for(var e=0;e<this.uiList.length;++e)if(this.uiList[e].tag===t)return this.uiList[e];return null},t.prototype.getRes=function(t,e,n){return new Promise(function(o,a){cc.resources.load(t,e,function(t,e){return t?(cc.log(t),a(t)):(n&&n(e),o(e))})})},t.prototype.getBundleRes=function(t,e,n,o){return new Promise(function(a,r){cc.assetManager.loadBundle(t,function(t,i){if(t)return cc.error(t),r(t);i.load(e,n,function(t,e){return t?(cc.log(t),r(t)):(o&&o(e),a(e))})})})},t._instance=null,t}();n.UIManager=i.getInstance(),function(t){t[t.NORMAL=1]="NORMAL",t[t.POPUP=10]="POPUP",t[t.MASK=15]="MASK",t[t.TIPS=20]="TIPS",t[t.ERROR=30]="ERROR",t[t.SUBMISSION=40]="SUBMISSION"}(n.EPANEL_ZORDER||(n.EPANEL_ZORDER={})),cc._RF.pop()},{"../UI/BaseUI":"BaseUI"}],UploadAndReturnPanel:[function(t,e,n){"use strict";cc._RF.push(e,"8a2a4ho4VlCloJCvzPCR9a/","UploadAndReturnPanel");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./../../Manager/ListenerManager"),s=t("../BaseFrameUI"),c=t("../../Data/FrameMsgType"),p=t("../../Utils/UIHelp"),l=t("../../Manager/ReportManager"),u=t("../../Manager/SoundManager"),h=t("../../SDK/T2M"),d=t("../../../../game/scripts/Manager/EditorManager"),f=cc._decorator,_=f.ccclass,g=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.POSITION_CHANGED,function(){t.adjustWidget()})},e.prototype.start=function(){i.ListenerManager.dispatch(c.FrameMsgType.ON_EDIT_STATE_SWITCHING,1)},e.prototype.onFanHui=function(){i.ListenerManager.dispatch(c.FrameMsgType.ON_EDIT_STATE_SWITCHING,0),p.UIHelp.closeStarCount(),p.UIHelp.closeGamePanel(),p.UIHelp.closeUploadAndReturnPanel(),p.UIHelp.closeSubmissionPanel(),p.UIHelp.closeOverTips(),p.UIHelp.closeAffirmTip(),l.ReportManager.reportGameOver(),u.SoundManager.stopAll(),h.T2M.onReturnToTeacherPanel()},e.prototype.onTiJiao=function(){!d.EditorManager.isSupportEdit()||l.ReportManager.isAllOver?p.UIHelp.showSubmissionPanel():p.UIHelp.showTip("\u8bf7\u5148\u5b8c\u6210\u4e00\u904d\u9898\u76ee")},e.prototype.adjustWidget=function(){var t=cc.winSize.height,e=this.getComponent(cc.Widget);e&&(t>this.node.height?e.bottom=(t-this.node.height)/2:e.bottom=0,e.updateAlignment())},e.className="UploadAndReturnPanel",r([_],e)}(s.default));n.default=g,cc._RF.pop()},{"../../../../game/scripts/Manager/EditorManager":"EditorManager","../../Data/FrameMsgType":"FrameMsgType","../../Manager/ReportManager":"ReportManager","../../Manager/SoundManager":"SoundManager","../../SDK/T2M":"T2M","../../Utils/UIHelp":"UIHelp","../BaseFrameUI":"BaseFrameUI","./../../Manager/ListenerManager":"ListenerManager"}],replayBtn:[function(t,e,n){"use strict";cc._RF.push(e,"f496fZ+e7dBKotK1z+dphJ7","replayBtn");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Data/FrameMsgType"),s=t("../../SDK/T2M"),c=cc._decorator,p=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._touchEnable=!0,e}return a(e,t),e.prototype.start=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){t._touchEnable&&(t.node.scale=1.1)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){t._touchEnable&&(t._touchEnable=!1,t.node.scale=1,s.T2M.dispatch(i.FrameMsgType.REPLAY_START,null))},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.node.scale=1},this)},e.prototype.onEnable=function(){this._touchEnable=!0},r([p],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../Data/FrameMsgType":"FrameMsgType","../../SDK/T2M":"T2M"}]},{},["FrameConstValue","FrameMsgType","FrameSyncData","NetWork","ListenerManager","ReportManager","SoundManager","SyncDataManager","UIManager","GameMsg","T2M","AdaptiveScreen","BaseFrameUI","BaseUI","BindNode","GameMain","MaskGlobal","MaskRecover","TeacherPanelLoading","Tip","TitleNode","replayBtn","AffirmTips","BaseGamePanel","BaseTeacherPanel","ErrorPanel","LoadingUI","OverTips","StarCount","SubmissionPanel","TipUI","UploadAndReturnPanel","AudioPlayExtension","BoundingBoxDemo","BoundingBoxHelp","HitTest","MathUtils","Tools","UIHelp","ButtonSync","DragGroupSync","DragSync","ConstValue","CustomSyncData","EventType","EditorManager","GameManager","SkeletonExt","Fangkuai","GameLayer","GameUIManager","GuideLayer","StartLayer","GamePanel","TeacherPanel"]);